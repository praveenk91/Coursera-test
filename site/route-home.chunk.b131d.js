webpackJsonp([1],{"2rb+":function(t,e,n){t.exports=n.p+"07fd679922795e6bf3bab50f39e2b7be.png"},"6SIb":function(t,e,n){"use strict";function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var i=n("KM04"),c=i.h,s=i.Component;e.a=function(t){function e(){return o(this,t.apply(this,arguments))}return r(e,t),e.prototype.isInside=function(){var t=this.base.getBoundingClientRect().top,e=this.container!==window?this.container.offsetHeight:window.innerHeight,n=this.container!==window?this.container.getBoundingClientRect().top:0;return n<=t&&t<=n+e},e.prototype.handleScroll=function(t){var e=this.isInside(),n=this._prev||!1;if(this._prev=e,n!==e){var o=this.props,r=o.onEnter,i=void 0===r?function(){}:r,c=o.onLeave,s=void 0===c?function(){}:c;e&&i(t),n&&s(t)}},e.prototype.componentDidMount=function(){this.container=this.props.container||window,this.boundScroller=this.handleScroll.bind(this),this.container.addEventListener("scroll",this.boundScroller),this.handleScroll(null)},e.prototype.componentWillUnmount=function(){this.container.removeEventListener("scroll",this.boundScroller)},e.prototype.render=function(t){var e=t.children;return e.length?e[0]:c("span")},e}(s)},AMmz:function(t,e,n){t.exports=n.p+"121883b6fdbaf26194436c02f020080b.png"},Egen:function(t,e,n){"use strict";function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var i=n("KM04"),c=(n.n(i),n("sw5u")),s=(n.n(c),n("ax2v")),a=n.n(s),l=n("V9cG"),p=n.n(l),u=n("lPRO"),h=n.n(u),d=n("AMmz"),f=n.n(d),b=n("J4iQ"),v=n.n(b),m=n("Jlre"),y=n.n(m),g=n("d09o"),w=n.n(g);e.a=function(t){function e(){for(var e,n,r,i=arguments.length,c=Array(i),s=0;s<i;s++)c[s]=arguments[s];return e=n=o(this,t.call.apply(t,[this].concat(c))),n.state={Share:!1,Like:!1,Download:!1},n.handleClick=function(t,e,o,r){"likeCount"==e?n.setState({Like:!0},function(){return console.log("Handleclick",n.state)}):n.setState("saveCount"==e?{Download:!0}:{Share:!0}),n.props.handleOnAction(t,e,o||0,r)},r=e,o(n,r)}return r(e,t),e.prototype.render=function(){var t=this,e=(new Date(this.props.createdAt),this.props.postedById?this.props.postedById:""),n=e.name?e.name.split(" ").join("-"):"news",o=this.state,r=o.Share,s=o.Like,l=o.Download;return console.log("cardLike",s),Object(i.h)("div",{className:"card",id:this.props._id},Object(i.h)("div",{className:"card_header"},Object(i.h)("div",{className:"item"},Object(i.h)(c.Link,{href:"/"+n},Object(i.h)("img",{src:e.imgUrl&&e.imgUrl.length>5?e.imgUrl:a.a,alt:e.name?e.name:"News",className:"avtaar"}))),Object(i.h)("div",{className:"item"},Object(i.h)("div",{className:"caption"},Object(i.h)("p",null,this.props.caption)))),Object(i.h)("div",{className:"card_body"},Object(i.h)("div",{className:"card_image"},"video"==this.props.type?Object(i.h)("video",{width:"100%",controls:!0},Object(i.h)("source",{src:this.props.url,type:"video/mp4 "})):Object(i.h)("img",{src:this.props.url,alt:"card image"}))),Object(i.h)("div",{className:"card_footer"},Object(i.h)("span",null,Object(i.h)("a",{href:"https://api.whatsapp.com/send?text="+this.props.caption+" https://circle.news/"+n+"/"+this.props._id,onClick:function(){return t.handleClick(t.props.index,"shareCount",t.props.shareCount,t.props._id)}},Object(i.h)("img",{src:r?y.a:h.a,alt:"share icon",className:"icon"})),Object(i.h)("i",null,this.props.shareCount)),Object(i.h)("span",null,Object(i.h)("img",{src:s?v.a:p.a,alt:"like icon",onClick:function(){return t.handleClick(t.props.index,"likeCount",t.props.likeCount,t.props._id)},className:"icon"}),Object(i.h)("i",null,this.props.likeCount)),Object(i.h)("span",null,Object(i.h)("a",{href:this.props.url,onClick:function(){return handleClick(t.props.index,"saveCount",t.props.saveCount,t.props._id)},download:this.props.url},Object(i.h)("img",{src:l?w.a:f.a,alt:"download icon",className:"icon"})),Object(i.h)("i",null,this.props.saveCount))))},e}(i.Component)},HZBD:function(t,e,n){"use strict";function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var i=n("KM04");n.n(i);e.a=function(t){function e(e){var n=o(this,t.call(this,e));return n.onScroll=n.onScroll.bind(n),n.prevScrollTop=0,n}return r(e,t),e.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!1)},e.prototype.componentWillUnmount=function(){window.removeEventListener("scroll",this.onScroll,!1)},e.prototype.onScroll=function(){if(this.prevScrollTop<window.scrollY&&window.innerHeight+window.scrollY>=document.body.offsetHeight-400){var t=this.props,e=t.onScrollFunction;t.isLoading||e()}this.prevScrollTop=window.scrollY},e.prototype.render=function(){var t=this.props,e=t.children,n=t.className;return Object(i.h)("div",{className:n},e)},e}(i.Component)},J4iQ:function(t,e,n){t.exports=n.p+"2c397008c58fa2d3dea34316b7e61c1a.png"},Jlre:function(t,e,n){t.exports=n.p+"15c6afecafbea0c39aedaae89c2afa5f.png"},V9cG:function(t,e,n){t.exports=n.p+"9137c0ba76d9f1d7c20d3bab80e6dd6e.png"},ZAL5:function(t){t.exports={home:"home__MseGd"}},ax2v:function(t,e,n){t.exports=n.p+"d58e99cf8e0892c62ebec0cde9d6b369.png"},d09o:function(t,e,n){t.exports=n.p+"213ffc6430fd5b0331d6b2d41503076c.png"},"iOg+":function(t,e,n){"use strict";function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=n("KM04"),c=(n.n(i),n("Egen")),s=n("ZAL5"),a=(n.n(s),n("47PK")),l=n("HZBD"),p=n("6SIb"),u=n("2rb+"),h=n.n(u),d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t};e.default=function(t){function e(){for(var e,n,r,i=arguments.length,c=Array(i),s=0;s<i;s++)c[s]=arguments[s];return e=n=o(this,t.call.apply(t,[this].concat(c))),n.state={cards:[],isLoading:!1,cursor:0},n.startTime=[],n.HandleEnter=function(t,e){n.startTime[e]=(new Date).getTime(),n.props.HandleDate(t)},n.HandleLeave=function(t){var e=(new Date).getTime()-n.startTime[t];e>1e3&&(a.a.views.put({contentId:t,data:e,action:"view"}),a.a.views.toArray().then(function(t){return console.log("View test",t)}))},n.loadMore=function(){n.setState({isLoading:!0}),fetch("https://circle.news/api/post?start="+n.state.cursor+"&limit=20").then(function(t){return t.json()}).then(function(t){var e=n.state.cursor+t.length;n.setState(function(n){return{cards:[].concat(n.cards,t),cursor:e,isLoading:!1}})}).catch(function(t){return console.log(t)})},n.handleOnAction=function(t,e,o,r){var i=[].concat(n.state.cards);i[t][e]=o+1,n.setState({cards:i});var c={};c[e]=o+1;var s={},a=localStorage.getItem("circleUser");a&&(s.userPhone=a),s.action=e,s.contentId=r,fetch("https://circle.news/api/post/"+r,{method:"PUT",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({post:c,behaviour:s})}).then(function(t){return t.json()}).then(function(t){console.log(t)}).catch(function(t){return console.log("err",t)})},r=e,o(n,r)}return r(e,t),e.prototype.componentDidMount=function(){var t=this;this.props.HandleLogo(h.a,!0),this.setState({isLoading:!0}),fetch("https://circle.news/api/post?start="+this.state.cursor+"&limit=20",{method:"GET",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}}).then(function(t){return t.json()}).then(function(e){t.setState({cards:e,isLoading:!1,cursor:e.length});for(var n=e,o=Array.isArray(n),r=0,n=o?n:n[Symbol.iterator]();;){var i;if(o){if(r>=n.length)break;i=n[r++]}else{if(r=n.next(),r.done)break;i=r.value}a.a.cards.put(i)}return a.a.cards.toArray()}).then(function(t){return console.log("IndexDb Test",t)}).catch(function(t){return console.log("err",t)})},e.prototype.render=function(){var t=this;console.log("Home state",this.state);var e=this.state.cards.map(function(e,n){return Object(i.h)(p.a,{onEnter:function(){return t.HandleEnter(e.createdAt,e._id)},onLeave:function(){return t.HandleLeave(e._id)}},Object(i.h)(c.a,d({},e,{index:n,handleOnAction:t.handleOnAction})))});return Object(i.h)(l.a,{isLoading:this.state.isLoading,onScrollFunction:this.loadMore},Object(i.h)("div",{className:"card_list"},e))},e}(i.Component)},lPRO:function(t,e,n){t.exports=n.p+"f9f87803c07aea7fde7aac66016c3443.png"}});
//# sourceMappingURL=route-home.chunk.b131d.js.map