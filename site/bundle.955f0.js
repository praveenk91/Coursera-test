!function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n=window.webpackJsonp;window.webpackJsonp=function(e,r,i){for(var u,a,c=0,s=[];c<e.length;c++)a=e[c],o[a]&&s.push(o[a][0]),o[a]=0;for(u in r)Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u]);for(n&&n(e,r,i);s.length;)s.shift()()};var r={},o={3:0};e.e=function(t){function n(){a.onerror=a.onload=null,clearTimeout(c);var e=o[t];0!==e&&(e&&e[1](new Error("Loading chunk "+t+" failed.")),o[t]=void 0)}var r=o[t];if(0===r)return new Promise(function(t){t()});if(r)return r[2];var i=new Promise(function(e,n){r=o[t]=[e,n]});r[2]=i;var u=document.getElementsByTagName("head")[0],a=document.createElement("script");a.type="text/javascript",a.charset="utf-8",a.async=!0,a.timeout=12e4,e.nc&&a.setAttribute("nonce",e.nc),a.src=e.p+""+({0:"route-profile",1:"route-home",2:"route-form"}[t]||t)+".chunk."+{0:"02330",1:"b131d",2:"2ed73"}[t]+".js";var c=setTimeout(n,12e4);return a.onerror=a.onload=n,u.appendChild(a),i},e.m=t,e.c=r,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e.oe=function(t){throw console.error(t),t},e(e.s="pwNi")}({"/QC5":function(t,e,n){"use strict";function r(t,e){for(var n in e)t[n]=e[n];return t}function o(t,e,n){var r,o=/(?:\?([^#]*))?(#.*)?$/,i=t.match(o),u={};if(i&&i[1])for(var c=i[1].split("&"),s=0;s<c.length;s++){var l=c[s].split("=");u[decodeURIComponent(l[0])]=decodeURIComponent(l.slice(1).join("="))}t=a(t.replace(o,"")),e=a(e||"");for(var f=Math.max(t.length,e.length),h=0;h<f;h++)if(e[h]&&":"===e[h].charAt(0)){var p=e[h].replace(/(^\:|[+*?]+$)/g,""),d=(e[h].match(/[+*?]+$/)||k)[0]||"",v=~d.indexOf("+"),y=~d.indexOf("*"),m=t[h]||"";if(!m&&!y&&(d.indexOf("?")<0||v)){r=!1;break}if(u[p]=decodeURIComponent(m),v||y){u[p]=t.slice(h).map(decodeURIComponent).join("/");break}}else if(e[h]!==t[h]){r=!1;break}return(!0===n.default||!1!==r)&&u}function i(t,e){return t.rank<e.rank?1:t.rank>e.rank?-1:t.index-e.index}function u(t,e){return t.index=e,t.rank=l(t),t.attributes}function a(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function c(t){return":"==t.charAt(0)?1+"*+?".indexOf(t.charAt(t.length-1))||4:5}function s(t){return a(t).map(c).join("")}function l(t){return t.attributes.default?0:s(t.attributes.path)}function f(t){return null!=t.__preactattr_||"undefined"!=typeof Symbol&&null!=t[Symbol.for("preactattr")]}function h(t,e){void 0===e&&(e="push"),E&&E[e]?E[e](t):"undefined"!=typeof history&&history[e+"State"]&&history[e+"State"](null,null,t)}function p(){var t;return t=E&&E.location?E.location:E&&E.getCurrentLocation?E.getCurrentLocation():"undefined"!=typeof location?location:A,""+(t.pathname||"")+(t.search||"")}function d(t,e){return void 0===e&&(e=!1),"string"!=typeof t&&t.url&&(e=t.replace,t=t.url),v(t)&&h(t,e?"replace":"push"),y(t)}function v(t){for(var e=O.length;e--;)if(O[e].canRoute(t))return!0;return!1}function y(t){for(var e=!1,n=0;n<O.length;n++)!0===O[n].routeTo(t)&&(e=!0);for(var r=x.length;r--;)x[r](t);return e}function m(t){if(t&&t.getAttribute){var e=t.getAttribute("href"),n=t.getAttribute("target");if(e&&e.match(/^\//g)&&(!n||n.match(/^_?self$/i)))return d(e)}}function g(t){if(0==t.button)return m(t.currentTarget||t.target||this),b(t)}function b(t){return t&&(t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.stopPropagation&&t.stopPropagation(),t.preventDefault()),!1}function _(t){if(!(t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||0!==t.button)){var e=t.target;do{if("A"===String(e.nodeName).toUpperCase()&&e.getAttribute("href")&&f(e)){if(e.hasAttribute("native"))return;if(m(e))return b(t)}}while(e=e.parentNode)}}function w(){S||("function"==typeof addEventListener&&(E||addEventListener("popstate",function(){y(p())}),addEventListener("click",_)),S=!0)}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"subscribers",function(){return x}),n.d(e,"getCurrentUrl",function(){return p}),n.d(e,"route",function(){return d}),n.d(e,"Router",function(){return j}),n.d(e,"Route",function(){return C}),n.d(e,"Link",function(){return P});var T=n("KM04"),k=(n.n(T),{}),E=null,O=[],x=[],A={},S=!1,j=function(t){function e(e){t.call(this,e),e.history&&(E=e.history),this.state={url:e.url||p()},w()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.shouldComponentUpdate=function(t){return!0!==t.static||(t.url!==this.props.url||t.onChange!==this.props.onChange)},e.prototype.canRoute=function(t){return this.getMatchingChildren(this.props.children,t,!1).length>0},e.prototype.routeTo=function(t){return this._didRoute=!1,this.setState({url:t}),this.updating?this.canRoute(t):(this.forceUpdate(),this._didRoute)},e.prototype.componentWillMount=function(){O.push(this),this.updating=!0},e.prototype.componentDidMount=function(){var t=this;E&&(this.unlisten=E.listen(function(e){t.routeTo(""+(e.pathname||"")+(e.search||""))})),this.updating=!1},e.prototype.componentWillUnmount=function(){"function"==typeof this.unlisten&&this.unlisten(),O.splice(O.indexOf(this),1)},e.prototype.componentWillUpdate=function(){this.updating=!0},e.prototype.componentDidUpdate=function(){this.updating=!1},e.prototype.getMatchingChildren=function(t,e,n){return t.filter(u).sort(i).map(function(t){var i=o(e,t.attributes.path,t.attributes);if(i){if(!1!==n){var u={url:e,matches:i};return r(u,i),delete u.ref,delete u.key,Object(T.cloneElement)(t,u)}return t}}).filter(Boolean)},e.prototype.render=function(t,e){var n=t.children,r=t.onChange,o=e.url,i=this.getMatchingChildren(n,o,!0),u=i[0]||null;this._didRoute=!!u;var a=this.previousUrl;return o!==a&&(this.previousUrl=o,"function"==typeof r&&r({router:this,url:o,previous:a,active:i,current:u})),u},e}(T.Component),P=function(t){return Object(T.h)("a",r({onClick:g},t))},C=function(t){return Object(T.h)(t.component,t)};j.subscribers=x,j.getCurrentUrl=p,j.route=d,j.Router=j,j.Route=C,j.Link=P,e.default=j},"47PK":function(t,e,n){"use strict";var r=n("nH/Y"),o=new r.a("circleDb");o.version(1).stores({cards:"_id,caption,createdAt,isActive,likeCount,postedBy,postedById,saveCount,shareCount,type,updatedAt,url",views:"contentId, data, action"}),e.a=o},"7N8r":function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){function e(){var e=this;r.Component.call(this);var n=void 0,o=void 0;this.componentWillMount=function(){n=e.base=e.nextBase||e.__b,t(function(t){e.setState({child:t.default||t})})},this.shouldComponentUpdate=function(t,e){return e=void 0===e.child,o=e&&void 0===o&&n?(0,r.h)(n.nodeName,{dangerouslySetInnerHTML:{__html:n.innerHTML}}):"",!e},this.render=function(t,e){return e.child?(0,r.h)(e.child,t):o}}return(e.prototype=new r.Component).constructor=e,e};var r=n("KM04")},FJnM:function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s=n("KM04"),l=n("xToX"),f=r(l),h=n("koiw"),p=r(h),d=n("J4Nk"),v=r(d),y=n("Qxat"),m="data-preact-helmet",g=function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},b=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r[e])return r[e]}return null},_=function(t){var e=b(t,"title"),n=b(t,"titleTemplate");if(n&&e)return n.replace(/%s/g,function(){return e});var r=b(t,"defaultTitle");return e||r||""},w=function(t){return b(t,"onChangeClientState")||function(){}},T=function(t,e){return e.filter(function(e){return void 0!==e[t]}).map(function(e){return e[t]}).reduce(function(t,e){return c({},t,e)},{})},k=function(t,e){return e.filter(function(t){return void 0!==t[y.TAG_NAMES.BASE]}).map(function(t){return t[y.TAG_NAMES.BASE]}).reverse().reduce(function(e,n){if(!e.length)for(var r=Object.keys(n),o=0;o<r.length;o++){var i=r[o],u=i.toLowerCase();if(-1!==t.indexOf(u)&&n[u])return e.concat(n)}return e},[])},E=function(t,e,n){var r={};return n.filter(function(e){return void 0!==e[t]}).map(function(e){return e[t]}).reverse().reduce(function(t,n){var o={};n.filter(function(t){for(var n=void 0,i=Object.keys(t),u=0;u<i.length;u++){var a=i[u],c=a.toLowerCase();-1===e.indexOf(c)||n===y.TAG_PROPERTIES.REL&&"canonical"===t[n].toLowerCase()||c===y.TAG_PROPERTIES.REL&&"stylesheet"===t[c].toLowerCase()||(n=c),-1===e.indexOf(a)||a!==y.TAG_PROPERTIES.INNER_HTML&&a!==y.TAG_PROPERTIES.CSS_TEXT&&a!==y.TAG_PROPERTIES.ITEM_PROP||(n=a)}if(!n||!t[n])return!1;var s=t[n].toLowerCase();return r[n]||(r[n]={}),o[n]||(o[n]={}),!r[n][s]&&(o[n][s]=!0,!0)}).reverse().forEach(function(e){return t.push(e)});for(var i=Object.keys(o),u=0;u<i.length;u++){var a=i[u],c=(0,v.default)({},r[a],o[a]);r[a]=c}return t},[]).reverse()},O=function(t,e){document.title=t||document.title,x(y.TAG_NAMES.TITLE,e)},x=function(t,e){for(var n=document.getElementsByTagName(t)[0],r=n.getAttribute(m),o=r?r.split(","):[],i=[].concat(o),u=Object.keys(e),a=0;a<u.length;a++){var c=u[a];n.setAttribute(c,e[c]||""),-1===o.indexOf(c)&&o.push(c);var s=i.indexOf(c);-1!==s&&i.splice(s,1)}for(var l=i.length-1;l>=0;l--)n.removeAttribute(i[l]);o.length===i.length?n.removeAttribute(m):n.setAttribute(m,o.join(","))},A=function(t,e){var n=document.head||document.querySelector("head"),r=n.querySelectorAll(t+"["+m+"]"),o=Array.prototype.slice.call(r),i=[],u=void 0;return e&&e.length&&e.forEach(function(e){var n=document.createElement(t);for(var r in e)if(e.hasOwnProperty(r))if("innerHTML"===r)n.innerHTML=e.innerHTML;else if("cssText"===r)n.styleSheet?n.styleSheet.cssText=e.cssText:n.appendChild(document.createTextNode(e.cssText));else{var a=void 0===e[r]?"":e[r];n.setAttribute(r,a)}n.setAttribute(m,"true"),o.some(function(t,e){return u=e,n.isEqualNode(t)})?o.splice(u,1):i.push(n)}),o.forEach(function(t){return t.parentNode.removeChild(t)}),i.forEach(function(t){return n.appendChild(t)}),{oldTags:o,newTags:i}},S=function(t){return Object.keys(t).reduce(function(e,n){var r=void 0!==t[n]?n+'="'+t[n]+'"':""+n;return e?e+" "+r:r},"")},j=function(t,e,n){var r=S(n);return r?"<"+t+" "+m+" "+r+">"+g(e)+"</"+t+">":"<"+t+" "+m+">"+g(e)+"</"+t+">"},P=function(t,e){return e.reduce(function(e,n){var r=Object.keys(n).filter(function(t){return!("innerHTML"===t||"cssText"===t)}).reduce(function(t,e){var r=void 0===n[e]?e:e+'="'+g(n[e])+'"';return t?t+" "+r:r},""),o=n.innerHTML||n.cssText||"",i=-1===[y.TAG_NAMES.NOSCRIPT,y.TAG_NAMES.SCRIPT,y.TAG_NAMES.STYLE].indexOf(t);return e+"<"+t+" "+m+" "+r+(i?">":">"+o+"</"+t+">")},"")},C=function(t,e,n){var r=u({key:e},m,!0),o=Object.keys(n).reduce(function(t,e){return t[e]=n[e],t},r);return[(0,s.h)(y.TAG_NAMES.TITLE,o,e)]},N=function(t,e){return e.map(function(e,n){var r=u({key:n},m,!0);return Object.keys(e).forEach(function(t){var n=t;if("innerHTML"===n||"cssText"===n){r.dangerouslySetInnerHTML={__html:e.innerHTML||e.cssText}}else r[n]=e[t]}),(0,s.h)(t,r)})},M=function(t,e){switch(t){case y.TAG_NAMES.TITLE:return{toComponent:function(){return C(0,e.title,e.titleAttributes)},toString:function(){return j(t,e.title,e.titleAttributes)}};case y.TAG_NAMES.HTML:return{toComponent:function(){return e},toString:function(){return S(e)}};default:return{toComponent:function(){return N(t,e)},toString:function(){return P(t,e)}}}},I=function(t){var e=t.htmlAttributes,n=t.title,r=t.titleAttributes,o=t.baseTag,i=t.metaTags,u=t.linkTags,a=t.scriptTags,c=t.noscriptTags,s=t.styleTags;return{htmlAttributes:M(y.TAG_NAMES.HTML,e),title:M(y.TAG_NAMES.TITLE,{title:n,titleAttributes:r}),base:M(y.TAG_NAMES.BASE,o),meta:M(y.TAG_NAMES.META,i),link:M(y.TAG_NAMES.LINK,u),script:M(y.TAG_NAMES.SCRIPT,a),noscript:M(y.TAG_NAMES.NOSCRIPT,c),style:M(y.TAG_NAMES.STYLE,s)}},R=function(t){return{htmlAttributes:T(y.TAG_NAMES.HTML,t),title:_(t),titleAttributes:T("titleAttributes",t),baseTag:k([y.TAG_PROPERTIES.HREF],t),metaTags:E(y.TAG_NAMES.META,[y.TAG_PROPERTIES.NAME,y.TAG_PROPERTIES.CHARSET,y.TAG_PROPERTIES.HTTPEQUIV,y.TAG_PROPERTIES.PROPERTY,y.TAG_PROPERTIES.ITEM_PROP],t),linkTags:E(y.TAG_NAMES.LINK,[y.TAG_PROPERTIES.REL,y.TAG_PROPERTIES.HREF],t),scriptTags:E(y.TAG_NAMES.SCRIPT,[y.TAG_PROPERTIES.SRC,y.TAG_PROPERTIES.INNER_HTML],t),noscriptTags:E(y.TAG_NAMES.NOSCRIPT,[y.TAG_PROPERTIES.INNER_HTML],t),styleTags:E(y.TAG_NAMES.STYLE,[y.TAG_PROPERTIES.CSS_TEXT],t),onChangeClientState:w(t)}},D=function(t){var e=t.htmlAttributes,n=t.title,r=t.titleAttributes,o=t.baseTag,i=t.metaTags,u=t.linkTags,a=t.scriptTags,c=t.noscriptTags,s=t.styleTags,l=t.onChangeClientState;x("html",e),O(n,r);var f={baseTag:A(y.TAG_NAMES.BASE,o),metaTags:A(y.TAG_NAMES.META,i),linkTags:A(y.TAG_NAMES.LINK,u),scriptTags:A(y.TAG_NAMES.SCRIPT,a),noscriptTags:A(y.TAG_NAMES.NOSCRIPT,c),styleTags:A(y.TAG_NAMES.STYLE,s)},h={},p={};Object.keys(f).forEach(function(t){var e=f[t],n=e.newTags,r=e.oldTags;n.length&&(h[t]=n),r.length&&(p[t]=f[t].oldTags)}),l(t,h,p)},L=function(){return null},K=(0,f.default)(R,D,I)(L);e.default=function(t){var e,n;return n=e=function(e){function n(){return o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return i(n,e),a(n,[{key:"shouldComponentUpdate",value:function(t){var e=c({},t);return e.children&&e.children.length||delete e.children,!(0,p.default)(this.props,e)}},{key:"render",value:function(){return(0,s.h)(t,this.props)}}],[{key:"canUseDOM",set:function(e){t.canUseDOM=e}}]),n}(s.Component),e.peek=t.peek,e.rewind=function(){var e=t.rewind();return e||(e=I({htmlAttributes:{},title:"",titleAttributes:{},baseTag:[],metaTags:[],linkTags:[],scriptTags:[],noscriptTags:[],styleTags:[]})),e},n}(K),t.exports=e.default},J4Nk:function(t){"use strict";function e(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(t){o[t]=t}),"abcdefghijklmnopqrst"===Object.keys(n({},o)).join("")}catch(t){return!1}}()?Object.assign:function(t){for(var n,u,a=e(t),c=1;c<arguments.length;c++){n=Object(arguments[c]);for(var s in n)o.call(n,s)&&(a[s]=n[s]);if(r){u=r(n);for(var l=0;l<u.length;l++)i.call(n,u[l])&&(a[u[l]]=n[u[l]])}}return a}},JkW7:function(t,e,n){"use strict";function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function i(t){n.e(1).then(function(){t(n("iOg+"))}.bind(null,n)).catch(n.oe)}function u(t){n.e(0).then(function(){t(n("B9hw"))}.bind(null,n)).catch(n.oe)}function a(t){n.e(2).then(function(){t(n("k1CD"))}.bind(null,n)).catch(n.oe)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var f=(n("rq4c"),n("KM04")),h=n("/QC5"),p=n("FJnM"),d=n.n(p),v=n("sw5u"),y=n("u3et"),m=n.n(y),g=n("pQiA"),b=n.n(g),_=Object(f.h)("div",{className:"header_item"},Object(f.h)(v.Link,{href:"/"},Object(f.h)("img",{className:"back",src:b.a,alt:"back"}))),w=function(t){function e(){return r(this,t.apply(this,arguments))}return o(e,t),e.prototype.render=function(){var t=this.props,e=t.user,n=t.date,r=t.logoHead,o=t.complete;console.log("headeruser",e);var i=void 0,u=void 0,a=void 0,c=void 0,s=["जनवरी","फरवरी","मार्च","अप्रैल","मई","जून","जुलाई","अगस्त","सितम्बर","अक्टूबर","नवंबर","दिसंबर"];return n?(console.log("uchit",n),i=new Date(n),u=i?i.getMonth():null,c=u?s[u]:"",a=i?i.getDate():""):(a="",c=""),console.log("header",c),o?Object(f.h)("header",{class:m.a.header},Object(f.h)("div",{className:"header_item"},Object(f.h)(v.Link,{activeClassName:m.a.active,href:e?"#":"/user",className:"sign_up"},e?e.name.length>1?e.name.slice(0,2):(""+e.phone).slice(6,10):"sign up")),Object(f.h)("div",{className:"header_item"},Object(f.h)(v.Link,{className:"logo",activeClassName:m.a.active,href:"/"},Object(f.h)("img",{src:r,alt:"logo"}))),Object(f.h)("div",{className:"header_item"},Object(f.h)("h1",null,a," ",c))):Object(f.h)("header",{class:m.a.header},_,Object(f.h)("div",{className:"header_item"},Object(f.h)(v.Link,{className:"logo_head",activeClassName:m.a.active,href:"/"},Object(f.h)("img",{src:r,alt:"logo"}))),Object(f.h)("div",{className:"header_item"},Object(f.h)("h1",null,a," ",c)))},e}(f.Component),T=w,k=n("7N8r"),E=n.n(k),O=E()(i),x=E()(u),A=E()(a),S=n("47PK"),j=function(t){function e(n){c(this,e);var r=s(this,t.call(this,n));r.handleRoute=function(t){r.currentUrl=t.url},r.handleLogoHead=function(t,e){r.setState({logoHead:t,complete:e})},r.handleDate=function(t){r.setState({date:t})},r.sendData=function(t){t&&t.data&&t.data.length>0&&fetch("https://circle.news/api/view-behaviour",{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({behaviours:t})}).then(function(){console.log("sendData"),S.a.views.clear().then(function(){console.log("Db Cleared")})}).catch(function(t){return console.log(t)})};var o=JSON.parse(window.localStorage.getItem("circleUser"));return r.state={user:o,date:"",logoHead:"",complete:!0},r}return l(e,t),e.prototype.componentDidMount=function(){var t=this;this.Interval=setInterval(function(){return S.a.views.toArray().then(function(e){return t.sendData(e)})},12e4)},e.prototype.componentWillUnmount=function(){clearInterval(this.Interval)},e.prototype.render=function(){var t=this;return console.log("app",this.state.user),Object(f.h)("div",{id:"app"},Object(f.h)(d.a,{title:"Circle News",defaultTitle:"Circle News",meta:[{name:"description",content:"डिजीटल इंडिया का डिजीटल न्यूज़ पेपर"},{property:"og:title",content:"Circle News"},{property:"og:description",content:"डिजीटल इंडिया का डिजीटल न्यूज़ पेपर"},{property:"og:image",content:"./circleLogo.png"},{property:"og:url",content:"https://circle.news"},{property:"og:site_name",content:"Circle News"}]}),Object(f.h)(T,{user:this.state.user,date:this.state.date,logoHead:this.state.logoHead,complete:this.state.complete}),Object(f.h)(h.Router,{onChange:this.handleRoute},Object(f.h)(O,{path:"/",HandleDate:function(e){return t.handleDate(e)},HandleLogo:function(e,n){return t.handleLogoHead(e,n)}}),Object(f.h)(A,{path:"/user",handleUser:function(e){return t.setState({user:e})}}),Object(f.h)(x,{path:"/:postedBy/:postId?",HandleDate:function(e){return t.handleDate(e)},HandleLogo:function(e,n){return t.handleLogoHead(e,n)}})))},e}(f.Component);e.default=j},KM04:function(t){!function(){"use strict";function e(){}function n(t,n){var r,o,i,u,a=M;for(u=arguments.length;u-- >2;)N.push(arguments[u]);for(n&&null!=n.children&&(N.length||N.push(n.children),delete n.children);N.length;)if((o=N.pop())&&void 0!==o.pop)for(u=o.length;u--;)N.push(o[u]);else"boolean"==typeof o&&(o=null),(i="function"!=typeof t)&&(null==o?o="":"number"==typeof o?o+="":"string"!=typeof o&&(i=!1)),i&&r?a[a.length-1]+=o:a===M?a=[o]:a.push(o),r=i;var c=new e;return c.nodeName=t,c.children=a,c.attributes=null==n?void 0:n,c.key=null==n?void 0:n.key,void 0!==C.vnode&&C.vnode(c),c}function r(t,e){for(var n in e)t[n]=e[n];return t}function o(t,e){return n(t.nodeName,r(r({},t.attributes),e),arguments.length>2?[].slice.call(arguments,2):t.children)}function i(t){!t.__d&&(t.__d=!0)&&1==D.push(t)&&(C.debounceRendering||I)(u)}function u(){var t,e=D;for(D=[];t=e.pop();)t.__d&&x(t)}function a(t,e,n){return"string"==typeof e||"number"==typeof e?void 0!==t.splitText:"string"==typeof e.nodeName?!t._componentConstructor&&c(t,e.nodeName):n||t._componentConstructor===e.nodeName}function c(t,e){return t.__n===e||t.nodeName.toLowerCase()===e.toLowerCase()}function s(t){var e=r({},t.attributes);e.children=t.children;var n=t.nodeName.defaultProps;if(void 0!==n)for(var o in n)void 0===e[o]&&(e[o]=n[o]);return e}function l(t,e){var n=e?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return n.__n=t,n}function f(t){var e=t.parentNode;e&&e.removeChild(t)}function h(t,e,n,r,o){if("className"===e&&(e="class"),"key"===e);else if("ref"===e)n&&n(null),r&&r(t);else if("class"!==e||o)if("style"===e){if(r&&"string"!=typeof r&&"string"!=typeof n||(t.style.cssText=r||""),r&&"object"==typeof r){if("string"!=typeof n)for(var i in n)i in r||(t.style[i]="");for(var i in r)t.style[i]="number"==typeof r[i]&&!1===R.test(i)?r[i]+"px":r[i]}}else if("dangerouslySetInnerHTML"===e)r&&(t.innerHTML=r.__html||"");else if("o"==e[0]&&"n"==e[1]){var u=e!==(e=e.replace(/Capture$/,""));e=e.toLowerCase().substring(2),r?n||t.addEventListener(e,d,u):t.removeEventListener(e,d,u),(t.__l||(t.__l={}))[e]=r}else if("list"!==e&&"type"!==e&&!o&&e in t)p(t,e,null==r?"":r),null!=r&&!1!==r||t.removeAttribute(e);else{var a=o&&e!==(e=e.replace(/^xlink:?/,""));null==r||!1===r?a?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.removeAttribute(e):"function"!=typeof r&&(a?t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),r):t.setAttribute(e,r))}else t.className=r||""}function p(t,e,n){try{t[e]=n}catch(t){}}function d(t){return this.__l[t.type](C.event&&C.event(t)||t)}function v(){for(var t;t=L.pop();)C.afterMount&&C.afterMount(t),t.componentDidMount&&t.componentDidMount()}function y(t,e,n,r,o,i){K++||(U=null!=o&&void 0!==o.ownerSVGElement,B=null!=t&&!("__preactattr_"in t));var u=m(t,e,n,r,i);return o&&u.parentNode!==o&&o.appendChild(u),--K||(B=!1,i||v()),u}function m(t,e,n,r,o){var i=t,u=U;if(null!=e&&"boolean"!=typeof e||(e=""),"string"==typeof e||"number"==typeof e)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||o)?t.nodeValue!=e&&(t.nodeValue=e):(i=document.createTextNode(e),t&&(t.parentNode&&t.parentNode.replaceChild(i,t),b(t,!0))),i.__preactattr_=!0,i;var a=e.nodeName;if("function"==typeof a)return A(t,e,n,r);if(U="svg"===a||"foreignObject"!==a&&U,a+="",(!t||!c(t,a))&&(i=l(a,U),t)){for(;t.firstChild;)i.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(i,t),b(t,!0)}var s=i.firstChild,f=i.__preactattr_,h=e.children;if(null==f){f=i.__preactattr_={};for(var p=i.attributes,d=p.length;d--;)f[p[d].name]=p[d].value}return!B&&h&&1===h.length&&"string"==typeof h[0]&&null!=s&&void 0!==s.splitText&&null==s.nextSibling?s.nodeValue!=h[0]&&(s.nodeValue=h[0]):(h&&h.length||null!=s)&&g(i,h,n,r,B||null!=f.dangerouslySetInnerHTML),w(i,e.attributes,f),U=u,i}function g(t,e,n,r,o){var i,u,c,s,l,h=t.childNodes,p=[],d={},v=0,y=0,g=h.length,_=0,w=e?e.length:0;if(0!==g)for(var T=0;T<g;T++){var k=h[T],E=k.__preactattr_,O=w&&E?k._component?k._component.__k:E.key:null;null!=O?(v++,d[O]=k):(E||(void 0!==k.splitText?!o||k.nodeValue.trim():o))&&(p[_++]=k)}if(0!==w)for(var T=0;T<w;T++){s=e[T],l=null;var O=s.key;if(null!=O)v&&void 0!==d[O]&&(l=d[O],d[O]=void 0,v--);else if(!l&&y<_)for(i=y;i<_;i++)if(void 0!==p[i]&&a(u=p[i],s,o)){l=u,p[i]=void 0,i===_-1&&_--,i===y&&y++;break}l=m(l,s,n,r),c=h[T],l&&l!==t&&l!==c&&(null==c?t.appendChild(l):l===c.nextSibling?f(c):t.insertBefore(l,c))}if(v)for(var T in d)void 0!==d[T]&&b(d[T],!1);for(;y<=_;)void 0!==(l=p[_--])&&b(l,!1)}function b(t,e){var n=t._component;n?S(n):(null!=t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),!1!==e&&null!=t.__preactattr_||f(t),_(t))}function _(t){for(t=t.lastChild;t;){var e=t.previousSibling;b(t,!0),t=e}}function w(t,e,n){var r;for(r in n)e&&null!=e[r]||null==n[r]||h(t,r,n[r],n[r]=void 0,U);for(r in e)"children"===r||"innerHTML"===r||r in n&&e[r]===("value"===r||"checked"===r?t[r]:n[r])||h(t,r,n[r],n[r]=e[r],U)}function T(t){var e=t.constructor.name;(F[e]||(F[e]=[])).push(t)}function k(t,e,n){var r,o=F[t.name];if(t.prototype&&t.prototype.render?(r=new t(e,n),j.call(r,e,n)):(r=new j(e,n),r.constructor=t,r.render=E),o)for(var i=o.length;i--;)if(o[i].constructor===t){r.__b=o[i].__b,o.splice(i,1);break}return r}function E(t,e,n){return this.constructor(t,n)}function O(t,e,n,r,o){t.__x||(t.__x=!0,(t.__r=e.ref)&&delete e.ref,(t.__k=e.key)&&delete e.key,!t.base||o?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(e,r),r&&r!==t.context&&(t.__c||(t.__c=t.context),t.context=r),t.__p||(t.__p=t.props),t.props=e,t.__x=!1,0!==n&&(1!==n&&!1===C.syncComponentUpdates&&t.base?i(t):x(t,1,o)),t.__r&&t.__r(t))}function x(t,e,n,o){if(!t.__x){var i,u,a,c=t.props,l=t.state,f=t.context,h=t.__p||c,p=t.__s||l,d=t.__c||f,m=t.base,g=t.__b,_=m||g,w=t._component,T=!1;if(m&&(t.props=h,t.state=p,t.context=d,2!==e&&t.shouldComponentUpdate&&!1===t.shouldComponentUpdate(c,l,f)?T=!0:t.componentWillUpdate&&t.componentWillUpdate(c,l,f),t.props=c,t.state=l,t.context=f),t.__p=t.__s=t.__c=t.__b=null,t.__d=!1,!T){i=t.render(c,l,f),t.getChildContext&&(f=r(r({},f),t.getChildContext()));var E,A,j=i&&i.nodeName;if("function"==typeof j){var P=s(i);u=w,u&&u.constructor===j&&P.key==u.__k?O(u,P,1,f,!1):(E=u,t._component=u=k(j,P,f),u.__b=u.__b||g,u.__u=t,O(u,P,0,f,!1),x(u,1,n,!0)),A=u.base}else a=_,E=w,E&&(a=t._component=null),(_||1===e)&&(a&&(a._component=null),A=y(a,i,f,n||!m,_&&_.parentNode,!0));if(_&&A!==_&&u!==w){var N=_.parentNode;N&&A!==N&&(N.replaceChild(A,_),E||(_._component=null,b(_,!1)))}if(E&&S(E),t.base=A,A&&!o){for(var M=t,I=t;I=I.__u;)(M=I).base=A;A._component=M,A._componentConstructor=M.constructor}}if(!m||n?L.unshift(t):T||(t.componentDidUpdate&&t.componentDidUpdate(h,p,d),C.afterUpdate&&C.afterUpdate(t)),null!=t.__h)for(;t.__h.length;)t.__h.pop().call(t);K||o||v()}}function A(t,e,n,r){for(var o=t&&t._component,i=o,u=t,a=o&&t._componentConstructor===e.nodeName,c=a,l=s(e);o&&!c&&(o=o.__u);)c=o.constructor===e.nodeName;return o&&c&&(!r||o._component)?(O(o,l,3,n,r),t=o.base):(i&&!a&&(S(i),t=u=null),o=k(e.nodeName,l,n),t&&!o.__b&&(o.__b=t,u=null),O(o,l,1,n,r),t=o.base,u&&t!==u&&(u._component=null,b(u,!1))),t}function S(t){C.beforeUnmount&&C.beforeUnmount(t);var e=t.base;t.__x=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var n=t._component;n?S(n):e&&(e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),t.__b=e,f(e),T(t),_(e)),t.__r&&t.__r(null)}function j(t,e){this.__d=!0,this.context=e,this.props=t,this.state=this.state||{}}function P(t,e,n){return y(n,t,{},!1,e,!1)}var C={},N=[],M=[],I="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,R=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,D=[],L=[],K=0,U=!1,B=!1,F={};r(j.prototype,{setState:function(t,e){var n=this.state;this.__s||(this.__s=r({},n)),r(n,"function"==typeof t?t(n,this.props):t),e&&(this.__h=this.__h||[]).push(e),i(this)},forceUpdate:function(t){t&&(this.__h=this.__h||[]).push(t),x(this,2)},render:function(){}});var G={h:n,createElement:n,cloneElement:o,Component:j,render:P,rerender:u,options:C};t.exports=G}()},OWwF:function(t,e){function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function r(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}e=t.exports="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}()?n:r,e.supported=n,e.unsupported=r},Qxat:function(t,e){e.__esModule=!0;e.TAG_NAMES={HTML:"htmlAttributes",TITLE:"title",BASE:"base",META:"meta",LINK:"link",SCRIPT:"script",NOSCRIPT:"noscript",STYLE:"style"},e.TAG_PROPERTIES={NAME:"name",CHARSET:"charset",HTTPEQUIV:"http-equiv",REL:"rel",HREF:"href",PROPERTY:"property",SRC:"src",INNER_HTML:"innerHTML",CSS_TEXT:"cssText",ITEM_PROP:"itemprop"},e.PREACT_TAG_MAP={charset:"charSet","http-equiv":"httpEquiv",itemprop:"itemProp",class:"className"}},h6ac:function(t){var e;e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(e=window)}t.exports=e},koiw:function(t,e,n){function r(t){return null===t||void 0===t}function o(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0]))}function i(t,e,n){var i,l;if(r(t)||r(e))return!1;if(t.prototype!==e.prototype)return!1;if(c(t))return!!c(e)&&(t=u.call(t),e=u.call(e),s(t,e,n));if(o(t)){if(!o(e))return!1;if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}try{var f=a(t),h=a(e)}catch(t){return!1}if(f.length!=h.length)return!1;for(f.sort(),h.sort(),i=f.length-1;i>=0;i--)if(f[i]!=h[i])return!1;for(i=f.length-1;i>=0;i--)if(l=f[i],!s(t[l],e[l],n))return!1;return typeof t==typeof e}var u=Array.prototype.slice,a=n("mbYX"),c=n("OWwF"),s=t.exports=function(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?n.strict?t===e:t==e:i(t,e,n))}},mbYX:function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}e=t.exports="function"==typeof Object.keys?Object.keys:n,e.shim=n},"nH/Y":function(t,e,n){"use strict";(function(t){function n(t,e){return"object"!=typeof e?t:(Nt(e).forEach(function(n){t[n]=e[n]}),t)}function r(t,e){return Dt.call(t,e)}function o(t,e){"function"==typeof e&&(e=e(Rt(t))),Nt(e).forEach(function(n){i(t,n,e[n])})}function i(t,e,o,i){Lt(t,e,n(o&&r(o,"get")&&"function"==typeof o.get?{get:o.get,set:o.set,configurable:!0}:{value:o,configurable:!0,writable:!0},i))}function u(t){return{from:function(e){return t.prototype=Object.create(e.prototype),i(t.prototype,"constructor",t),{extend:o.bind(null,t.prototype)}}}}function a(t,e){var n,r=Kt(t,e);return r||(n=Rt(t))&&a(n,e)}function c(t,e,n){return Ut.call(t,e,n)}function s(t,e){return e(t)}function l(t){if(!t)throw new Error("Assertion Failed")}function f(t){It.setImmediate?setImmediate(t):setTimeout(t,0)}function h(t,e){return t.reduce(function(t,n,r){var o=e(n,r);return o&&(t[o[0]]=o[1]),t},{})}function p(t,e){return function(){try{t.apply(this,arguments)}catch(t){e(t)}}}function d(t,e,n){try{t.apply(null,n)}catch(t){e&&e(t)}}function v(t,e){if(r(t,e))return t[e];if(!e)return t;if("string"!=typeof e){for(var n=[],o=0,i=e.length;o<i;++o){n.push(v(t,e[o]))}return n}var u=e.indexOf(".");if(-1!==u){var a=t[e.substr(0,u)];return void 0===a?void 0:v(a,e.substr(u+1))}}function y(t,e,n){if(t&&void 0!==e&&!("isFrozen"in Object&&Object.isFrozen(t)))if("string"!=typeof e&&"length"in e){l("string"!=typeof n&&"length"in n);for(var r=0,o=e.length;r<o;++r)y(t,e[r],n[r])}else{var i=e.indexOf(".");if(-1!==i){var u=e.substr(0,i),a=e.substr(i+1);if(""===a)void 0===n?delete t[u]:t[u]=n;else{var c=t[u];c||(c=t[u]={}),y(c,a,n)}}else void 0===n?delete t[e]:t[e]=n}}function m(t,e){"string"==typeof e?y(t,e,void 0):"length"in e&&[].map.call(e,function(e){y(t,e,void 0)})}function g(t){var e={};for(var n in t)r(t,n)&&(e[n]=t[n]);return e}function b(t){return Bt.apply([],t)}function _(t){if(!t||"object"!=typeof t)return t;var e;if(Mt(t)){e=[];for(var n=0,o=t.length;n<o;++n)e.push(_(t[n]))}else if(Ft.indexOf(t.constructor)>=0)e=t;else{e=t.constructor?Object.create(t.constructor.prototype):{};for(var i in t)r(t,i)&&(e[i]=_(t[i]))}return e}function w(t,e,n,o){return n=n||{},o=o||"",Nt(t).forEach(function(i){if(r(e,i)){var u=t[i],a=e[i];"object"==typeof u&&"object"==typeof a&&u&&a&&""+u.constructor==""+a.constructor?w(u,a,n,o+i+"."):u!==a&&(n[o+i]=e[i])}else n[o+i]=void 0}),Nt(e).forEach(function(i){r(t,i)||(n[o+i]=e[i])}),n}function T(t){var e,n,r,o;if(1===arguments.length){if(Mt(t))return t.slice();if(this===qt&&"string"==typeof t)return[t];if(o=Ht(t)){for(n=[];r=o.next(),!r.done;)n.push(r.value);return n}if(null==t)return[t];if("number"==typeof(e=t.length)){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}function k(t,e){Wt=t,Vt=e}function E(){if(Qt)try{throw new Error}catch(t){return t}return new Error}function O(t,e){var n=t.stack;return n?(e=e||0,0===n.indexOf(t.name)&&(e+=(t.name+t.message).split("\n").length),n.split("\n").slice(e).filter(Vt).map(function(t){return"\n"+t}).join("")):""}function x(t,e){return function(){return console.warn(t+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+O(E(),1)),e.apply(this,arguments)}}function A(t,e){this._e=E(),this.name=t,this.message=e}function S(t,e){return t+". Errors: "+e.map(function(t){return t.toString()}).filter(function(t,e,n){return n.indexOf(t)===e}).join("\n")}function j(t,e,n,r){this._e=E(),this.failures=e,this.failedKeys=r,this.successCount=n}function P(t,e){this._e=E(),this.name="BulkError",this.failures=e,this.message=S(t,e)}function C(t,e){if(!t||t instanceof A||t instanceof TypeError||t instanceof SyntaxError||!t.name||!ee[t.name])return t;var n=new ee[t.name](e||t.message,t);return"stack"in t&&i(n,"stack",{get:function(){return this.inner.stack}}),n}function N(){}function M(t){return t}function I(t,e){return null==t||t===M?e:function(n){return e(t(n))}}function R(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function D(t,e){return t===N?e:function(){var n=t.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var i=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?R(r,this.onsuccess):r),o&&(this.onerror=this.onerror?R(o,this.onerror):o),void 0!==i?i:n}}function L(t,e){return t===N?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?R(n,this.onsuccess):n),r&&(this.onerror=this.onerror?R(r,this.onerror):r)}}function K(t,e){return t===N?e:function(r){var o=t.apply(this,arguments);n(r,o);var i=this.onsuccess,u=this.onerror;this.onsuccess=null,this.onerror=null;var a=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?R(i,this.onsuccess):i),u&&(this.onerror=this.onerror?R(u,this.onerror):u),void 0===o?void 0===a?void 0:a:n(o,a)}}function U(t,e){return t===N?e:function(){return!1!==e.apply(this,arguments)&&t.apply(this,arguments)}}function B(t,e){return t===N?e:function(){var n=t.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,o=arguments.length,i=new Array(o);o--;)i[o]=arguments[o];return n.then(function(){return e.apply(r,i)})}return e.apply(this,arguments)}}function F(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=N,this._lib=!1;var e=this._PSD=Ee;if(Wt&&(this._stackHolder=E(),this._prev=null,this._numPrev=0),"function"!=typeof t){if(t!==re)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&q(this,this._value))}this._state=null,this._value=null,++e.ref,H(this,t)}function G(t,e,n,r,o){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=r,this.psd=o}function H(t,e){try{e(function(e){if(null===t._state){if(e===t)throw new TypeError("A promise cannot be resolved with itself.");var n=t._lib&&$();e&&"function"==typeof e.then?H(t,function(t,n){e instanceof F?e._then(t,n):e.then(t,n)}):(t._state=!0,t._value=e,W(t)),n&&X()}},q.bind(null,t))}catch(e){q(t,e)}}function q(t,e){if(_e.push(e),null===t._state){var n=t._lib&&$();e=Te(e),t._state=!1,t._value=e,Wt&&null!==e&&"object"==typeof e&&!e._promise&&d(function(){var n=a(e,"stack");e._promise=t,i(e,"stack",{get:function(){return de?n&&(n.get?n.get.apply(e):n.value):t.stack}})}),et(t),W(t),n&&X()}}function W(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)V(t,e[n]);var o=t._PSD;--o.ref||o.finalize(),0===xe&&(++xe,ye(function(){0==--xe&&Z()},[]))}function V(t,e){if(null===t._state)return void t._listeners.push(e);var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++xe,ye(Q,[n,t,e])}function Q(t,e,n){try{we=e;var r,o=e._value;e._state?r=t(o):(_e.length&&(_e=[]),r=t(o),-1===_e.indexOf(o)&&nt(e)),n.resolve(r)}catch(t){n.reject(t)}finally{we=null,0==--xe&&Z(),--n.psd.ref||n.psd.finalize()}}function Y(t,e,n){if(e.length===n)return e;var r="";if(!1===t._state){var o,i,u=t._value;null!=u?(o=u.name||"Error",i=u.message||u,r=O(u,0)):(o=u,i=""),e.push(o+(i?": "+i:"")+r)}return Wt&&(r=O(t._stackHolder,2),r&&-1===e.indexOf(r)&&e.push(r),t._prev&&Y(t._prev,e,n)),e}function J(t,e){var n=e?e._numPrev+1:0;n<oe&&(t._prev=e,t._numPrev=n)}function z(){$()&&X()}function $(){var t=me;return me=!1,ge=!1,t}function X(){var t,e,n;do{for(;Oe.length>0;)for(t=Oe,Oe=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}}while(Oe.length>0);me=!0,ge=!0}function Z(){var t=be;be=[],t.forEach(function(t){t._PSD.onunhandled.call(null,t._value,t)});for(var e=Ae.slice(0),n=e.length;n;)e[--n]()}function tt(t){function e(){t(),Ae.splice(Ae.indexOf(e),1)}Ae.push(e),++xe,ye(function(){0==--xe&&Z()},[])}function et(t){be.some(function(e){return e._value===t._value})||be.push(t)}function nt(t){for(var e=be.length;e;)if(be[--e]._value===t._value)return void be.splice(e,1)}function rt(t){return new F(re,!1,t)}function ot(t,e){var n=Ee;return function(){var r=$(),o=Ee;try{return ft(n,!0),t.apply(this,arguments)}catch(t){e&&e(t)}finally{ft(o,!1),r&&X()}}}function it(t,e,r,o){var i=Ee,u=Object.create(i);u.parent=i,u.ref=0,u.global=!1,u.id=++Re;var a=ke.env;u.env=pe?{Promise:F,PromiseProp:{value:F,configurable:!0,writable:!0},all:F.all,race:F.race,resolve:F.resolve,reject:F.reject,nthen:yt(a.nthen,u),gthen:yt(a.gthen,u)}:{},e&&n(u,e),++i.ref,u.finalize=function(){--this.parent.ref||this.parent.finalize()};var c=pt(u,t,r,o);return 0===u.ref&&u.finalize(),c}function ut(){return Pe.id||(Pe.id=++Ce),++Pe.awaits,Pe.echoes+=ie,Pe.id}function at(t){!Pe.awaits||t&&t!==Pe.id||(0==--Pe.awaits&&(Pe.id=0),Pe.echoes=Pe.awaits*ie)}function ct(t){return Pe.echoes&&t&&t.constructor===fe?(ut(),t.then(function(t){return at(),t},function(t){return at(),Le(t)})):t}function st(t){++Ie,Pe.echoes&&0!=--Pe.echoes||(Pe.echoes=Pe.id=0),Ne.push(Ee),ft(t,!0)}function lt(){var t=Ne[Ne.length-1];Ne.pop(),ft(t,!1)}function ft(t,e){var n=Ee;if((e?!Pe.echoes||Me++&&t===Ee:!Me||--Me&&t===Ee)||dt(e?st.bind(null,t):lt),t!==Ee&&(Ee=t,n===ke&&(ke.env=ht()),pe)){var r=ke.env.Promise,o=t.env;ce.then=o.nthen,r.prototype.then=o.gthen,(n.global||t.global)&&(Object.defineProperty(It,"Promise",o.PromiseProp),r.all=o.all,r.race=o.race,r.resolve=o.resolve,r.reject=o.reject)}}function ht(){var t=It.Promise;return pe?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(It,"Promise"),all:t.all,race:t.race,resolve:t.resolve,reject:t.reject,nthen:ce.then,gthen:t.prototype.then}:{}}function pt(t,e,n,r,o){var i=Ee;try{return ft(t,!0),e(n,r,o)}finally{ft(i,!1)}}function dt(t){le.call(ae,t)}function vt(t,e,n){return"function"!=typeof t?t:function(){var r=Ee;n&&ut(),ft(e,!0);try{return t.apply(this,arguments)}finally{ft(r,!1)}}}function yt(t,e){return function(n,r){return t.call(this,vt(n,e,!1),vt(r,e,!1))}}function mt(t,e){var r;try{r=e.onuncatched(t)}catch(t){}if(!1!==r)try{var o,i={promise:e,reason:t};if(It.document&&document.createEvent?(o=document.createEvent("Event"),o.initEvent(De,!0,!0),n(o,i)):It.CustomEvent&&(o=new CustomEvent(De,{detail:i}),n(o,i)),o&&It.dispatchEvent&&(dispatchEvent(o),!It.PromiseRejectionEvent&&It.onunhandledrejection))try{It.onunhandledrejection(o)}catch(t){}o.defaultPrevented||console.warn("Unhandled rejection: "+(t.stack||t))}catch(t){}}function gt(t){function e(t,e,i){if("object"==typeof t)return n(t);e||(e=U),i||(i=N);var u={subscribers:[],fire:i,subscribe:function(t){-1===u.subscribers.indexOf(t)&&(u.subscribers.push(t),u.fire=e(u.fire,t))},unsubscribe:function(t){u.subscribers=u.subscribers.filter(function(e){return e!==t}),u.fire=u.subscribers.reduce(e,i)}};return r[t]=o[t]=u,u}function n(t){Nt(t).forEach(function(n){var r=t[n];if(Mt(r))e(n,t[n][0],t[n][1]);else{if("asap"!==r)throw new te.InvalidArgument("Invalid event config");var o=e(n,M,function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];o.subscribers.forEach(function(t){f(function(){t.apply(null,e)})})})}})}var r={},o=function(e,n){if(n){for(var o=arguments.length,i=new Array(o-1);--o;)i[o-1]=arguments[o];return r[e].subscribe.apply(null,i),t}if("string"==typeof e)return r[e]};o.addEventType=e;for(var i=1,u=arguments.length;i<u;++i)e(arguments[i]);return o}function bt(t,e){function u(t){this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function a(t,e,n){var r=Xt._createTransaction($t,Gt,Bt);r.create(e),r._completion.catch(n);var o=r._reject.bind(r);it(function(){Ee.trans=r,0===t?(Nt(Bt).forEach(function(t){k(e,t,Bt[t].primKey,Bt[t].indexes)}),F.follow(function(){return Xt.on.populate.fire(r)}).catch(o)):f(t,r,e).catch(o)})}function f(t,e,n){function r(){return o.length?F.resolve(o.shift()(e.idbtrans)).then(r):F.resolve()}var o=[],i=Ft.filter(function(e){return e._cfg.version===t})[0];if(!i)throw new te.Upgrade("Dexie specification of currently installed DB version is missing");Bt=Xt._dbSchema=i._cfg.dbschema;var u=!1;return Ft.filter(function(e){return e._cfg.version>t}).forEach(function(t){o.push(function(){var r=Bt,o=t._cfg.dbschema;ht(r,n),ht(o,n),Bt=Xt._dbSchema=o;var i=m(r,o);if(i.add.forEach(function(t){k(n,t[0],t[1].primKey,t[1].indexes)}),i.change.forEach(function(t){if(t.recreate)throw new te.Upgrade("Not yet support for changing primary key");var e=n.objectStore(t.name);t.add.forEach(function(t){S(e,t)}),t.change.forEach(function(t){e.deleteIndex(t.name),S(e,t)}),t.del.forEach(function(t){e.deleteIndex(t)})}),t._cfg.contentUpgrade)return u=!0,F.follow(function(){t._cfg.contentUpgrade(e)})}),o.push(function(e){u&&Ve||A(t._cfg.dbschema,e)})}),r().then(function(){O(Bt,n)})}function m(t,e){var n={del:[],add:[],change:[]};for(var r in t)e[r]||n.del.push(r);for(r in e){var o=t[r],i=e[r];if(o){var u={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(o.primKey.src!==i.primKey.src)u.recreate=!0,n.change.push(u);else{var a=o.idxByName,c=i.idxByName;for(var s in a)c[s]||u.del.push(s);for(s in c){var l=a[s],f=c[s];l?l.src!==f.src&&u.change.push(f):u.add.push(f)}(u.del.length>0||u.add.length>0||u.change.length>0)&&n.change.push(u)}}else n.add.push([r,i])}return n}function k(t,e,n,r){var o=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(t){S(o,t)}),o}function O(t,e){Nt(t).forEach(function(n){e.db.objectStoreNames.contains(n)||k(e,n,t[n].primKey,t[n].indexes)})}function A(t,e){for(var n=0;n<e.db.objectStoreNames.length;++n){var r=e.db.objectStoreNames[n];null==t[r]&&e.db.deleteObjectStore(r)}}function S(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function C(t,e,n){if(zt||Ee.letThrough){var r=Xt._createTransaction(t,e,Bt);try{r.create()}catch(t){return Le(t)}return r._promise(t,function(t,e){return it(function(){return Ee.trans=r,n(t,e,r)})}).then(function(t){return r._completion.then(function(){return t})})}if(!Yt){if(!Lt)return Le(new te.DatabaseClosed);Xt.open().catch(N)}return Zt.then(function(){return C(t,e,n)})}function R(t,e,n){var r=arguments.length;if(r<2)throw new te.InvalidArgument("Too few arguments");for(var o=new Array(r-1);--r;)o[r-1]=arguments[r];return n=o.pop(),[t,b(o),n]}function U(t,e,n){this.name=t,this.schema=e,this._tx=n,this.hook=Ht[t]?Ht[t].hook:gt(null,{creating:[D,N],reading:[I,M],updating:[K,N],deleting:[L,N]})}function G(t,e,n){return(n?Ot:kt)(function(n){t.push(n),e&&e()})}function H(t,e,n,r,o){return new F(function(i,u){var a=n.length,c=a-1;if(0===a)return i();if(r){var s,l=Ot(u),f=Tt(null);d(function(){for(var r=0;r<a;++r){s={onsuccess:null,onerror:null};var u=n[r];o.call(s,u[0],u[1],e);var h=t.delete(u[0]);h._hookCtx=s,h.onerror=l,h.onsuccess=r===c?Tt(i):f}},function(t){throw s.onerror&&s.onerror(t),t})}else for(var h=0;h<a;++h){var p=t.delete(n[h]);p.onerror=kt(u),h===c&&(p.onsuccess=ot(function(){return i()}))}})}function q(t,e,n,r){var o=this;this.db=Xt,this.mode=t,this.storeNames=e,this.idbtrans=null,this.on=gt(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new F(function(t,e){o._resolve=t,o._reject=e}),this._completion.then(function(){o.active=!1,o.on.complete.fire()},function(t){var e=o.active;return o.active=!1,o.on.error.fire(t),o.parent?o.parent._reject(t):e&&o.idbtrans&&o.idbtrans.abort(),Le(t)})}function W(t,e,n){this._ctx={table:t,index:":id"===e?null:e,or:n}}function V(t,e){var n=null,r=null;if(e)try{n=e()}catch(t){r=t}var o=t._ctx,i=o.table;this._ctx={table:i,index:o.index,isPrimKey:!o.index||i.schema.primKey.keyPath&&o.index===i.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:o.or,valueMapper:i.hook.reading.fire}}function Q(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function Y(t,e){return t._cfg.version-e._cfg.version}function J(t,e,n){e.forEach(function(e){var r=n[e];t.forEach(function(t){e in t||(t===q.prototype||t instanceof q?i(t,e,{get:function(){return this.table(e)}}):t[e]=new U(e,r))})})}function z(t){t.forEach(function(t){for(var e in t)t[e]instanceof U&&delete t[e]})}function $(t,e,n,r,o,i){var u=i?function(t,e,r){return n(i(t),e,r)}:n,a=ot(u,o);t.onerror||(t.onerror=kt(o)),t.onsuccess=e?p(function(){var n=t.result;if(n){var i=function(){n.continue()};e(n,function(t){i=t},r,o)&&a(n.value,n,function(t){i=t}),i()}else r()},o):p(function(){var e=t.result;if(e){var n=function(){e.continue()};a(e.value,e,function(t){n=t}),n()}else r()},o)}function X(t){var e=[];return t.split(",").forEach(function(t){t=t.trim();var n=t.replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;e.push(new St(n,r||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),Mt(r),/\./.test(t)))}),e}function Z(t,e){return Kt.cmp(t,e)}function tt(t,e){return Z(t,e)<0?t:e}function et(t,e){return Z(t,e)>0?t:e}function nt(t,e){return Kt.cmp(t,e)}function rt(t,e){return Kt.cmp(e,t)}function ct(t,e){return t<e?-1:t===e?0:1}function st(t,e){return t>e?-1:t===e?0:1}function lt(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}function ft(){if(Xt.verno=Vt.version/10,Xt._dbSchema=Bt={},Gt=c(Vt.objectStoreNames,0),0!==Gt.length){var t=Vt.transaction(Pt(Gt),"readonly");Gt.forEach(function(e){for(var n=t.objectStore(e),r=n.keyPath,o=r&&"string"==typeof r&&-1!==r.indexOf("."),i=new St(r,r||"",!1,!1,!!n.autoIncrement,r&&"string"!=typeof r,o),u=[],a=0;a<n.indexNames.length;++a){var c=n.index(n.indexNames[a]);r=c.keyPath,o=r&&"string"==typeof r&&-1!==r.indexOf(".");u.push(new St(c.name,r,!!c.unique,!!c.multiEntry,!1,r&&"string"!=typeof r,o))}Bt[e]=new jt(e,i,u,{})}),J([Ht],Nt(Bt),Bt)}}function ht(t,e){for(var n=e.db.objectStoreNames,r=0;r<n.length;++r){var o=n[r],i=e.objectStore(o);mt="getAll"in i;for(var u=0;u<i.indexNames.length;++u){var a=i.indexNames[u],s=i.index(a).keyPath,l="string"==typeof s?s:"["+c(s).join("+")+"]";if(t[o]){var f=t[o].idxByName[l];f&&(f.name=a)}}}/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&It.WorkerGlobalScope&&It instanceof It.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(mt=!1)}function dt(t){Xt.on("blocked").fire(t),qe.filter(function(t){return t.name===Xt.name&&t!==Xt&&!t._vcFired}).map(function(e){return e.on("versionchange").fire(t)})}var vt,yt,mt,_t=bt.dependencies,Rt=n({addons:bt.addons,autoOpen:!0,indexedDB:_t.indexedDB,IDBKeyRange:_t.IDBKeyRange},e),Dt=Rt.addons,Lt=Rt.autoOpen,Kt=Rt.indexedDB,Ut=Rt.IDBKeyRange,Bt=this._dbSchema={},Ft=[],Gt=[],Ht={},Vt=null,Qt=null,Yt=!1,Jt=null,zt=!1,$t="readwrite",Xt=this,Zt=new F(function(t){vt=t}),ee=new F(function(t,e){yt=e}),ne=!0,re=!!Ct(Kt);this.version=function(t){if(Vt||Yt)throw new te.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var e=Ft.filter(function(e){return e._cfg.version===t})[0];return e||(e=new u(t),Ft.push(e),Ft.sort(Y),ne=!1,e)},n(u.prototype,{stores:function(t){this._cfg.storesSource=this._cfg.storesSource?n(this._cfg.storesSource,t):t;var e={};Ft.forEach(function(t){n(e,t._cfg.storesSource)});var r=this._cfg.dbschema={};return this._parseStoresSpec(e,r),Bt=Xt._dbSchema=r,z([Ht,Xt,q.prototype]),J([Ht,Xt,q.prototype,this._cfg.tables],Nt(r),r),Gt=Nt(r),this},upgrade:function(t){return this._cfg.contentUpgrade=t,this},_parseStoresSpec:function(t,e){Nt(t).forEach(function(n){if(null!==t[n]){var r={},o=X(t[n]),i=o.shift();if(i.multi)throw new te.Schema("Primary key cannot be multi-valued");i.keyPath&&y(r,i.keyPath,i.auto?0:i.keyPath),o.forEach(function(t){if(t.auto)throw new te.Schema("Only primary key can be marked as autoIncrement (++)");if(!t.keyPath)throw new te.Schema("Index must have a name and cannot be an empty string");y(r,t.keyPath,t.compound?t.keyPath.map(function(){return""}):"")}),e[n]=new jt(n,i,o,r)}})}}),this._allTables=Ht,this._createTransaction=function(t,e,n,r){return new q(t,e,n,r)},this._whenReady=function(t){return zt||Ee.letThrough?t():new F(function(t,e){if(!Yt){if(!Lt)return void e(new te.DatabaseClosed);Xt.open().catch(N)}Zt.then(t,e)}).then(t)},this.verno=0,this.open=function(){if(Yt||Vt)return Zt.then(function(){return Qt?Le(Qt):Xt});Wt&&(ee._stackHolder=E()),Yt=!0,Qt=null,zt=!1;var e=vt,n=null;return F.race([ee,new F(function(e,r){if(!Kt)throw new te.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var o=ne?Kt.open(t):Kt.open(t,Math.round(10*Xt.verno));if(!o)throw new te.MissingAPI("IndexedDB API not available");o.onerror=kt(r),o.onblocked=ot(dt),o.onupgradeneeded=ot(function(e){if(n=o.transaction,ne&&!Xt._allowEmptyDB){o.onerror=xt,n.abort(),o.result.close();var i=Kt.deleteDatabase(t);i.onsuccess=i.onerror=ot(function(){r(new te.NoSuchDatabase("Database "+t+" doesnt exist"))})}else{n.onerror=kt(r);a((e.oldVersion>Math.pow(2,62)?0:e.oldVersion)/10,n,r)}},r),o.onsuccess=ot(function(){if(n=null,Vt=o.result,qe.push(Xt),ne)ft();else if(Vt.objectStoreNames.length>0)try{ht(Bt,Vt.transaction(Pt(Vt.objectStoreNames),"readonly"))}catch(t){}Vt.onversionchange=ot(function(t){Xt._vcFired=!0,Xt.on("versionchange").fire(t)}),re||"__dbnames"===t||je.dbnames.put({name:t}).catch(N),e()},r)})]).then(function(){return Jt=[],F.resolve(bt.vip(Xt.on.ready.fire)).then(function t(){if(Jt.length>0){var e=Jt.reduce(B,N);return Jt=[],F.resolve(bt.vip(e)).then(t)}})}).finally(function(){Jt=null}).then(function(){return Yt=!1,Xt}).catch(function(t){try{n&&n.abort()}catch(t){}return Yt=!1,Xt.close(),Qt=t,Le(Qt)}).finally(function(){zt=!0,e()})},this.close=function(){var t=qe.indexOf(Xt);if(t>=0&&qe.splice(t,1),Vt){try{Vt.close()}catch(t){}Vt=null}Lt=!1,Qt=new te.DatabaseClosed,Yt&&yt(Qt),Zt=new F(function(t){vt=t}),ee=new F(function(t,e){yt=e})},this.delete=function(){var e=arguments.length>0;return new F(function(n,r){function o(){Xt.close();var e=Kt.deleteDatabase(t);e.onsuccess=ot(function(){re||je.dbnames.delete(t).catch(N),n()}),e.onerror=kt(r),e.onblocked=dt}if(e)throw new te.InvalidArgument("Arguments not allowed in db.delete()");Yt?Zt.then(o):o()})},this.backendDB=function(){return Vt},this.isOpen=function(){return null!==Vt},this.hasBeenClosed=function(){return Qt&&Qt instanceof te.DatabaseClosed},this.hasFailed=function(){return null!==Qt},this.dynamicallyOpened=function(){return ne},this.name=t,o(this,{tables:{get:function(){return Nt(Ht).map(function(t){return Ht[t]})}}}),this.on=gt(this,"populate","blocked","versionchange",{ready:[B,N]}),this.on.ready.subscribe=s(this.on.ready.subscribe,function(t){return function(e,n){bt.vip(function(){zt?(Qt||F.resolve().then(e),n&&t(e)):Jt?(Jt.push(e),n&&t(e)):(t(e),n||t(function t(){Xt.on.ready.unsubscribe(e),Xt.on.ready.unsubscribe(t)}))})}}),this.transaction=function(){return this._transaction.apply(this,R.apply(this,arguments))},this._transaction=function(t,e,n){function r(){return F.resolve().then(function(){var e=Ee.transless||Ee,r=Xt._createTransaction(t,u,Bt,o),i={trans:r,transless:e};o?r.idbtrans=o.idbtrans:r.create(),n.constructor===he&&ut();var a,c=F.follow(function(){if(a=n.call(r,r))if(a.constructor===fe){var t=at.bind(null,null);a.then(t,t)}else"function"==typeof a.next&&"function"==typeof a.throw&&(a=At(a))},i);return(a&&"function"==typeof a.then?F.resolve(a).then(function(t){return r.active?t:Le(new te.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):c.then(function(){return a})).then(function(t){return o&&r._resolve(),r._completion.then(function(){return t})}).catch(function(t){return r._reject(t),Le(t)})})}var o=Ee.trans;o&&o.db===Xt&&-1===t.indexOf("!")||(o=null);var i=-1!==t.indexOf("?");t=t.replace("!","").replace("?","");try{var u=e.map(function(t){var e=t instanceof U?t.name:t;if("string"!=typeof e)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e});if("r"==t||"readonly"==t)t="readonly";else{if("rw"!=t&&t!=$t)throw new te.InvalidArgument("Invalid transaction mode: "+t);t=$t}if(o){if("readonly"===o.mode&&t===$t){if(!i)throw new te.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o=null}o&&u.forEach(function(t){if(o&&-1===o.storeNames.indexOf(t)){if(!i)throw new te.SubTransaction("Table "+t+" not included in parent transaction.");o=null}}),i&&o&&!o.active&&(o=null)}}catch(t){return o?o._promise(null,function(e,n){n(t)}):Le(t)}return o?o._promise(t,r,"lock"):Ee.trans?pt(Ee.transless,function(){return Xt._whenReady(r)}):Xt._whenReady(r)},this.table=function(t){if(!r(Ht,t))throw new te.InvalidTable("Table "+t+" does not exist");return Ht[t]},o(U.prototype,{_trans:function(t,e,n){var r=this._tx||Ee.trans;return r&&r.db===Xt?r===Ee.trans?r._promise(t,e,n):it(function(){return r._promise(t,e,n)},{trans:r,transless:Ee.transless||Ee}):C(t,[this.name],e)},_idbstore:function(t,e,n){function r(t,n,r){if(-1===r.storeNames.indexOf(o))throw new te.NotFound("Table"+o+" not part of transaction");return e(t,n,r.idbtrans.objectStore(o),r)}var o=this.name;return this._trans(t,r,n)},get:function(t,e){if(t&&t.constructor===Object)return this.where(t).first(e);var n=this;return this._idbstore("readonly",function(e,r,o){var i=o.get(t);i.onerror=kt(r),i.onsuccess=ot(function(){e(n.hook.reading.fire(i.result))},r)}).then(e)},where:function(t){if("string"==typeof t)return new W(this,t);if(Mt(t))return new W(this,"["+t.join("+")+"]");var e=Nt(t);if(1===e.length)return this.where(e[0]).equals(t[e[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(t){return t.compound&&e.every(function(e){return t.keyPath.indexOf(e)>=0})&&t.keyPath.every(function(t){return e.indexOf(t)>=0})})[0];if(n&&Be!==Ue)return this.where(n.name).equals(n.keyPath.map(function(e){return t[e]}));n||console.warn("The query "+JSON.stringify(t)+" on "+this.name+" would benefit of a compound index ["+e.join("+")+"]");var r=this.schema.idxByName,o=e.reduce(function(e,n){return[e[0]||r[n],e[0]||!r[n]?lt(e[1],function(e){return""+v(e,n)==""+t[n]}):e[1]]},[null,null]),i=o[0];return i?this.where(i.name).equals(t[i.keyPath]).filter(o[1]):n?this.filter(o[1]):this.where(e).equals("")},count:function(t){return this.toCollection().count(t)},offset:function(t){return this.toCollection().offset(t)},limit:function(t){return this.toCollection().limit(t)},reverse:function(){return this.toCollection().reverse()},filter:function(t){return this.toCollection().and(t)},each:function(t){return this.toCollection().each(t)},toArray:function(t){return this.toCollection().toArray(t)},orderBy:function(t){return new V(new W(this,Mt(t)?"["+t.join("+")+"]":t))},toCollection:function(){return new V(new W(this))},mapToClass:function(t,e){this.schema.mappedClass=t;var n=Object.create(t.prototype);e&&wt(n,e),this.schema.instanceTemplate=n;var o=function(e){if(!e)return e;var n=Object.create(t.prototype);for(var o in e)if(r(e,o))try{n[o]=e[o]}catch(t){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=o,this.hook("reading",o),t},defineClass:function(t){return this.mapToClass(bt.defineClass(t),t)},bulkDelete:function(t){return this.hook.deleting.fire===N?this._idbstore($t,function(e,n,r,o){e(H(r,o,t,!1,N))}):this.where(":id").anyOf(t).delete().then(function(){})},bulkPut:function(t,e){var n=this;return this._idbstore($t,function(r,o,i){if(!i.keyPath&&!n.schema.primKey.auto&&!e)throw new te.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(i.keyPath&&e)throw new te.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(e&&e.length!==t.length)throw new te.InvalidArgument("Arguments objects and keys must have the same length");if(0===t.length)return r();var u,a,c=function(t){0===s.length?r(t):o(new P(n.name+".bulkPut(): "+s.length+" of "+l+" operations failed",s))},s=[],l=t.length,f=n;if(n.hook.creating.fire===N&&n.hook.updating.fire===N){a=G(s);for(var p=0,d=t.length;p<d;++p)u=e?i.put(t[p],e[p]):i.put(t[p]),u.onerror=a;u.onerror=G(s,c),u.onsuccess=Et(c)}else{var y=e||i.keyPath&&t.map(function(t){return v(t,i.keyPath)}),m=y&&h(y,function(e,n){return null!=e&&[e,t[n]]});(y?f.where(":id").anyOf(y.filter(function(t){return null!=t})).modify(function(){this.value=m[this.primKey],m[this.primKey]=null}).catch(j,function(t){s=t.failures}).then(function(){for(var n=[],r=e&&[],o=y.length-1;o>=0;--o){var i=y[o];(null==i||m[i])&&(n.push(t[o]),e&&r.push(i),null!=i&&(m[i]=null))}return n.reverse(),e&&r.reverse(),f.bulkAdd(n,r)}).then(function(t){var e=y[y.length-1];return null!=e?e:t}):f.bulkAdd(t)).then(c).catch(P,function(t){s=s.concat(t.failures),c()}).catch(o)}},"locked")},bulkAdd:function(t,e){var n=this,r=this.hook.creating.fire;return this._idbstore($t,function(o,i,u,a){function c(t){0===h.length?o(t):i(new P(n.name+".bulkAdd(): "+h.length+" of "+p+" operations failed",h))}if(!u.keyPath&&!n.schema.primKey.auto&&!e)throw new te.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(u.keyPath&&e)throw new te.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(e&&e.length!==t.length)throw new te.InvalidArgument("Arguments objects and keys must have the same length");if(0===t.length)return o();var s,l,f,h=[],p=t.length;if(r!==N){var m,g=u.keyPath;l=G(h,null,!0),f=Tt(null),d(function(){for(var n=0,o=t.length;n<o;++n){m={onerror:null,onsuccess:null};var i=e&&e[n],c=t[n],h=e?i:g?v(c,g):void 0,p=r.call(m,h,c,a);null==h&&null!=p&&(g?(c=_(c),y(c,g,p)):i=p),s=null!=i?u.add(c,i):u.add(c),s._hookCtx=m,n<o-1&&(s.onerror=l,m.onsuccess&&(s.onsuccess=f))}},function(t){throw m.onerror&&m.onerror(t),t}),s.onerror=G(h,c,!0),s.onsuccess=Tt(c)}else{l=G(h);for(var b=0,w=t.length;b<w;++b)s=e?u.add(t[b],e[b]):u.add(t[b]),s.onerror=l;s.onerror=G(h,c),s.onsuccess=Et(c)}})},add:function(t,e){var n=this.hook.creating.fire;return this._idbstore($t,function(r,o,i,u){var a={onsuccess:null,onerror:null};if(n!==N){var c=null!=e?e:i.keyPath?v(t,i.keyPath):void 0,s=n.call(a,c,t,u);null==c&&null!=s&&(i.keyPath?y(t,i.keyPath,s):e=s)}try{var l=null!=e?i.add(t,e):i.add(t);l._hookCtx=a,l.onerror=Ot(o),l.onsuccess=Tt(function(e){var n=i.keyPath;n&&y(t,n,e),r(e)})}catch(t){throw a.onerror&&a.onerror(t),t}})},put:function(t,e){var n=this,r=this.hook.creating.fire,o=this.hook.updating.fire;if(r!==N||o!==N){var i=this.schema.primKey.keyPath,u=void 0!==e?e:i&&v(t,i);return null==u?this.add(t):(t=_(t),this._trans($t,function(){return n.where(":id").equals(u).modify(function(){this.value=t}).then(function(r){return 0===r?n.add(t,e):u})},"locked"))}return this._idbstore($t,function(n,r,o){var i=void 0!==e?o.put(t,e):o.put(t);i.onerror=kt(r),i.onsuccess=ot(function(e){var r=o.keyPath;r&&y(t,r,e.target.result),n(i.result)})})},delete:function(t){return this.hook.deleting.subscribers.length?this.where(":id").equals(t).delete():this._idbstore($t,function(e,n,r){var o=r.delete(t);o.onerror=kt(n),o.onsuccess=ot(function(){e(o.result)})})},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore($t,function(t,e,n){var r=n.clear();r.onerror=kt(e),r.onsuccess=ot(function(){t(r.result)})})},update:function(t,e){if("object"!=typeof e||Mt(e))throw new te.InvalidArgument("Modifications must be an object.");if("object"!=typeof t||Mt(t))return this.where(":id").equals(t).modify(e);Nt(e).forEach(function(n){y(t,n,e[n])});var n=v(t,this.schema.primKey.keyPath);return void 0===n?Le(new te.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(e)}}),o(q.prototype,{_lock:function(){return l(!Ee.global),++this._reculock,1!==this._reculock||Ee.global||(Ee.lockOwnerFor=this),this},_unlock:function(){if(l(!Ee.global),0==--this._reculock)for(Ee.global||(Ee.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{pt(t[1],t[0])}catch(t){}}return this},_locked:function(){return this._reculock&&Ee.lockOwnerFor!==this},create:function(t){var e=this;if(!this.mode)return this;if(l(!this.idbtrans),!t&&!Vt)switch(Qt&&Qt.name){case"DatabaseClosedError":throw new te.DatabaseClosed(Qt);case"MissingAPIError":throw new te.MissingAPI(Qt.message,Qt);default:throw new te.OpenFailed(Qt)}if(!this.active)throw new te.TransactionInactive;return l(null===this._completion._state),t=this.idbtrans=t||Vt.transaction(Pt(this.storeNames),this.mode),t.onerror=ot(function(n){xt(n),e._reject(t.error)}),t.onabort=ot(function(n){xt(n),e.active&&e._reject(new te.Abort(t.error)),e.active=!1,e.on("abort").fire(n)}),t.oncomplete=ot(function(){e.active=!1,e._resolve()}),this},_promise:function(t,e,n){var r=this;if(t===$t&&this.mode!==$t)return Le(new te.ReadOnly("Transaction is readonly"));if(!this.active)return Le(new te.TransactionInactive);if(this._locked())return new F(function(o,i){r._blockedFuncs.push([function(){r._promise(t,e,n).then(o,i)},Ee])});if(n)return it(function(){var t=new F(function(t,n){r._lock();var o=e(t,n,r);o&&o.then&&o.then(t,n)});return t.finally(function(){return r._unlock()}),t._lib=!0,t});var o=new F(function(t,n){var o=e(t,n,r);o&&o.then&&o.then(t,n)});return o._lib=!0,o},_root:function(){return this.parent?this.parent._root():this},waitFor:function(t){var e=this._root();if(t=F.resolve(t),e._waitingFor)e._waitingFor=e._waitingFor.then(function(){return t});else{e._waitingFor=t,e._waitingQueue=[];var n=e.idbtrans.objectStore(e.storeNames[0]);!function t(){for(++e._spinCount;e._waitingQueue.length;)e._waitingQueue.shift()();e._waitingFor&&(n.get(-1/0).onsuccess=t)}()}var r=e._waitingFor;return new F(function(n,o){t.then(function(t){return e._waitingQueue.push(ot(n.bind(null,t)))},function(t){return e._waitingQueue.push(ot(o.bind(null,t)))}).finally(function(){e._waitingFor===r&&(e._waitingFor=null)})})},abort:function(){this.active&&this._reject(new te.Abort),this.active=!1},tables:{get:x("Transaction.tables",function(){return Ht})},table:function(t){return new U(t,Xt.table(t).schema,this)}}),o(W.prototype,function(){function t(t,e,n){var r=t instanceof W?new V(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function e(t){return new V(t,function(){return Ut.only("")}).limit(0)}function n(t){return"next"===t?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function r(t){return"next"===t?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function o(t,e,n,r,o,i){for(var u=Math.min(t.length,r.length),a=-1,c=0;c<u;++c){var s=e[c];if(s!==r[c])return o(t[c],n[c])<0?t.substr(0,c)+n[c]+n.substr(c+1):o(t[c],r[c])<0?t.substr(0,c)+r[c]+n.substr(c+1):a>=0?t.substr(0,a)+e[a]+n.substr(a+1):null;o(t[c],s)<0&&(a=c)}return u<r.length&&"next"===i?t+n.substr(t.length):u<t.length&&"prev"===i?t.substr(0,n.length):a<0?null:t.substr(0,a)+r[a]+n.substr(a+1)}function i(e,i,u,a){function c(t){s=n(t),l=r(t),f="next"===t?ct:st;var e=u.map(function(t){return{lower:l(t),upper:s(t)}}).sort(function(t,e){return f(t.lower,e.lower)});h=e.map(function(t){return t.upper}),p=e.map(function(t){return t.lower}),d=t,v="next"===t?"":a}var s,l,f,h,p,d,v,y=u.length;if(!u.every(function(t){return"string"==typeof t}))return t(e,He);c("next");var m=new V(e,function(){return Ut.bound(h[0],p[y-1]+a)});m._ondirectionchange=function(t){c(t)};var g=0;return m._addAlgorithm(function(t,e,n){var r=t.key;if("string"!=typeof r)return!1;var u=l(r);if(i(u,p,g))return!0;for(var a=null,c=g;c<y;++c){var s=o(r,u,h[c],p[c],f,d);null===s&&null===a?g=c+1:(null===a||f(a,s)>0)&&(a=s)}return e(null!==a?function(){t.continue(a+v)}:n),!1}),m}return{between:function(n,r,o,i){o=!1!==o,i=!0===i;try{return Z(n,r)>0||0===Z(n,r)&&(o||i)&&(!o||!i)?e(this):new V(this,function(){return Ut.bound(n,r,!o,!i)})}catch(e){return t(this,Ge)}},equals:function(t){return new V(this,function(){return Ut.only(t)})},above:function(t){return new V(this,function(){return Ut.lowerBound(t,!0)})},aboveOrEqual:function(t){return new V(this,function(){return Ut.lowerBound(t)})},below:function(t){return new V(this,function(){return Ut.upperBound(t,!0)})},belowOrEqual:function(t){return new V(this,function(){return Ut.upperBound(t)})},startsWith:function(e){return"string"!=typeof e?t(this,He):this.between(e,e+Ue,!0,!0)},startsWithIgnoreCase:function(t){return""===t?this.startsWith(t):i(this,function(t,e){return 0===t.indexOf(e[0])},[t],Ue)},equalsIgnoreCase:function(t){return i(this,function(t,e){return t===e[0]},[t],"")},anyOfIgnoreCase:function(){var t=T.apply(qt,arguments);return 0===t.length?e(this):i(this,function(t,e){return-1!==e.indexOf(t)},t,"")},startsWithAnyOfIgnoreCase:function(){var t=T.apply(qt,arguments);return 0===t.length?e(this):i(this,function(t,e){return e.some(function(e){return 0===t.indexOf(e)})},t,Ue)},anyOf:function(){var n=T.apply(qt,arguments),r=nt;try{n.sort(r)}catch(e){return t(this,Ge)}if(0===n.length)return e(this);var o=new V(this,function(){return Ut.bound(n[0],n[n.length-1])});o._ondirectionchange=function(t){r="next"===t?nt:rt,n.sort(r)};var i=0;return o._addAlgorithm(function(t,e,o){for(var u=t.key;r(u,n[i])>0;)if(++i===n.length)return e(o),!1;return 0===r(u,n[i])||(e(function(){t.continue(n[i])}),!1)}),o},notEqual:function(t){return this.inAnyRange([[Fe,t],[t,Be]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var e=T.apply(qt,arguments);if(0===e.length)return new V(this);try{e.sort(nt)}catch(e){return t(this,Ge)}var n=e.reduce(function(t,e){return t?t.concat([[t[t.length-1][1],e]]):[[Fe,e]]},null);return n.push([e[e.length-1],Be]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(n,r){function o(t,e){for(var n=0,r=t.length;n<r;++n){var o=t[n];if(Z(e[0],o[1])<0&&Z(e[1],o[0])>0){o[0]=tt(o[0],e[0]),o[1]=et(o[1],e[1]);break}}return n===r&&t.push(e),t}function i(t,e){return l(t[0],e[0])}function u(t){return!h(t)&&!p(t)}if(0===n.length)return e(this);if(!n.every(function(t){return void 0!==t[0]&&void 0!==t[1]&&nt(t[0],t[1])<=0}))return t(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",te.InvalidArgument);var a,c=!r||!1!==r.includeLowers,s=r&&!0===r.includeUppers,l=nt;try{a=n.reduce(o,[]),a.sort(i)}catch(e){return t(this,Ge)}var f=0,h=s?function(t){return nt(t,a[f][1])>0}:function(t){return nt(t,a[f][1])>=0},p=c?function(t){return rt(t,a[f][0])>0}:function(t){return rt(t,a[f][0])>=0},d=h,v=new V(this,function(){return Ut.bound(a[0][0],a[a.length-1][1],!c,!s)});return v._ondirectionchange=function(t){"next"===t?(d=h,l=nt):(d=p,l=rt),a.sort(i)},v._addAlgorithm(function(t,e,n){for(var r=t.key;d(r);)if(++f===a.length)return e(n),!1;return!!u(r)||0!==Z(r,a[f][1])&&0!==Z(r,a[f][0])&&(e(function(){t.continue(l===nt?a[f][0]:a[f][1])}),!1)}),v},startsWithAnyOf:function(){var n=T.apply(qt,arguments);return n.every(function(t){return"string"==typeof t})?0===n.length?e(this):this.inAnyRange(n.map(function(t){return[t,t+Ue]})):t(this,"startsWithAnyOf() only works with strings")}}}),o(V.prototype,function(){function t(t,e){t.filter=lt(t.filter,e)}function e(t,e,n){var r=t.replayFilter;t.replayFilter=r?function(){return lt(r(),e())}:e,t.justLimit=n&&!r}function o(t,e){t.isMatch=lt(t.isMatch,e)}function i(t,e){if(t.isPrimKey)return e;var n=t.table.schema.idxByName[t.index];if(!n)throw new te.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return e.index(n.name)}function u(t,e){var n=i(t,e);return t.keysOnly&&"openKeyCursor"in n?n.openKeyCursor(t.range||null,t.dir+t.unique):n.openCursor(t.range||null,t.dir+t.unique)}function a(t,e,n,o,i){var a=t.replayFilter?lt(t.filter,t.replayFilter()):t.filter;t.or?function(){function c(){2==++f&&n()}function s(t,n,i){if(!a||a(n,i,c,o)){var u=n.primaryKey,s=""+u;"[object ArrayBuffer]"===s&&(s=""+new Uint8Array(u)),r(l,s)||(l[s]=!0,e(t,n,i))}}var l={},f=0;t.or._iterate(s,c,o,i),$(u(t,i),t.algorithm,s,c,o,!t.keysOnly&&t.valueMapper)}():$(u(t,i),lt(t.algorithm,a),e,n,o,!t.keysOnly&&t.valueMapper)}return{_read:function(t,e){var n=this._ctx;return n.error?n.table._trans(null,Le.bind(null,n.error)):n.table._idbstore("readonly",t).then(e)},_write:function(t){var e=this._ctx;return e.error?e.table._trans(null,Le.bind(null,e.error)):e.table._idbstore($t,t,"locked")},_addAlgorithm:function(t){var e=this._ctx;e.algorithm=lt(e.algorithm,t)},_iterate:function(t,e,n,r){return a(this._ctx,t,e,n,r)},clone:function(t){var e=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&n(r,t),e._ctx=r,e},raw:function(){return this._ctx.valueMapper=null,this},each:function(t){var e=this._ctx;return this._read(function(n,r,o){a(e,t,n,r,o)})},count:function(t){var e=this._ctx;if(Q(e,!0))return this._read(function(t,n,r){var o=i(e,r),u=e.range?o.count(e.range):o.count();u.onerror=kt(n),u.onsuccess=function(n){t(Math.min(n.target.result,e.limit))}},t);var n=0;return this._read(function(t,r,o){a(e,function(){return++n,!1},function(){t(n)},r,o)},t)},sortBy:function(t,e){function n(t,e){return e?n(t[o[e]],e-1):t[i]}function r(t,e){var r=n(t,u),o=n(e,u);return r<o?-a:r>o?a:0}var o=t.split(".").reverse(),i=o[0],u=o.length-1,a="next"===this._ctx.dir?1:-1;return this.toArray(function(t){return t.sort(r)}).then(e)},toArray:function(t){var e=this._ctx;return this._read(function(t,n,r){if(mt&&"next"===e.dir&&Q(e,!0)&&e.limit>0){var o=e.table.hook.reading.fire,u=i(e,r),c=e.limit<1/0?u.getAll(e.range,e.limit):u.getAll(e.range);c.onerror=kt(n),c.onsuccess=Et(o===M?t:function(e){try{t(e.map(o))}catch(t){n(t)}})}else{var s=[];a(e,function(t){s.push(t)},function(){t(s)},n,r)}},t)},offset:function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,Q(n)?e(n,function(){var e=t;return function(t,n){return 0===e||(1===e?(--e,!1):(n(function(){t.advance(e),e=0}),!1))}}):e(n,function(){var e=t;return function(){return--e<0}}),this)},limit:function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),e(this._ctx,function(){var e=t;return function(t,n,r){return--e<=0&&n(r),e>=0}},!0),this},until:function(e,n){return t(this._ctx,function(t,r,o){return!e(t.value)||(r(o),n)}),this},first:function(t){return this.limit(1).toArray(function(t){return t[0]}).then(t)},last:function(t){return this.reverse().first(t)},filter:function(e){return t(this._ctx,function(t){return e(t.value)}),o(this._ctx,e),this},and:function(t){return this.filter(t)},or:function(t){return new W(this._ctx.table,t,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each(function(e,n){t(n.key,n)})},eachUniqueKey:function(t){return this._ctx.unique="unique",this.eachKey(t)},eachPrimaryKey:function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each(function(e,n){t(n.primaryKey,n)})},keys:function(t){var e=this._ctx;e.keysOnly=!e.isMatch;var n=[];return this.each(function(t,e){n.push(e.key)}).then(function(){return n}).then(t)},primaryKeys:function(t){var e=this._ctx;if(mt&&"next"===e.dir&&Q(e,!0)&&e.limit>0)return this._read(function(t,n,r){var o=i(e,r),u=e.limit<1/0?o.getAllKeys(e.range,e.limit):o.getAllKeys(e.range);u.onerror=kt(n),u.onsuccess=Et(t)}).then(t);e.keysOnly=!e.isMatch;var n=[];return this.each(function(t,e){n.push(e.primaryKey)}).then(function(){return n}).then(t)},uniqueKeys:function(t){return this._ctx.unique="unique",this.keys(t)},firstKey:function(t){return this.limit(1).keys(function(t){return t[0]}).then(t)},lastKey:function(t){return this.reverse().firstKey(t)},distinct:function(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var o={};return t(this._ctx,function(t){var e=t.primaryKey.toString(),n=r(o,e);return o[e]=!0,!n}),this},modify:function(t){var e=this,o=this._ctx,i=o.table.hook,u=i.updating.fire,a=i.deleting.fire;return this._write(function(o,i,c,s){function l(t,e){function n(t){return x.push(t),A.push(o.primKey),h(),!0}S=e.primaryKey;var o={primKey:e.primaryKey,value:t,onsuccess:null,onerror:null};if(!1!==p.call(o,t,o)){var i=!r(o,"value");++k,d(function(){var t=i?e.delete():e.update(o.value);t._hookCtx=o,t.onerror=Ot(n),t.onsuccess=Tt(function(){++E,h()})},n)}else o.onsuccess&&o.onsuccess(o.value)}function f(t){return t&&(x.push(t),A.push(S)),i(new j("Error modifying one or more objects",x,E,A))}function h(){O&&E+x.length===k&&(x.length>0?f():o(E))}var p;if("function"==typeof t)p=u===N&&a===N?t:function(e){var n=_(e);if(!1===t.call(this,e,this))return!1;if(r(this,"value")){var o=w(n,this.value),i=u.call(this,o,this.primKey,n,s);i&&(e=this.value,Nt(i).forEach(function(t){y(e,t,i[t])}))}else a.call(this,this.primKey,e,s)};else if(u===N){var m=Nt(t),b=m.length;p=function(e){for(var n=!1,r=0;r<b;++r){var o=m[r],i=t[o];v(e,o)!==i&&(y(e,o,i),n=!0)}return n}}else{var T=t;t=g(T),p=function(e){var r=!1,o=u.call(this,t,this.primKey,_(e),s);return o&&n(t,o),Nt(t).forEach(function(n){var o=t[n];v(e,n)!==o&&(y(e,n,o),r=!0)}),o&&(t=g(T)),r}}var k=0,E=0,O=!1,x=[],A=[],S=null;e.clone().raw()._iterate(l,function(){O=!0,h()},f,c)})},delete:function(){var t=this,e=this._ctx,n=e.range,r=e.table.hook.deleting.fire,o=r!==N;if(!o&&Q(e)&&(e.isPrimKey&&!Qe||!n))return this._write(function(t,e,r){var o=kt(e),i=n?r.count(n):r.count();i.onerror=o,i.onsuccess=function(){var u=i.result;d(function(){var e=n?r.delete(n):r.clear();e.onerror=o,e.onsuccess=function(){return t(u)}},function(t){return e(t)})}});var i=o?2e3:1e4;return this._write(function(n,u,a,c){var s=0,l=t.clone({keysOnly:!e.isMatch&&!o}).distinct().limit(i).raw(),f=[];n(function t(){return l.each(o?function(t,e){f.push([e.primaryKey,e.value])}:function(t,e){f.push(e.primaryKey)}).then(function(){return f.sort(o?function(t,e){return nt(t[0],e[0])}:nt),H(a,c,f,o,r)}).then(function(){var e=f.length;return s+=e,f=[],e<i?s:t()})}())})}}}),n(this,{Collection:V,Table:U,Transaction:q,Version:u,WhereClause:W}),function(){Xt.on("versionchange",function(t){t.newVersion>0?console.warn("Another connection wants to upgrade database '"+Xt.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+Xt.name+"'. Closing db now to resume the delete request."),Xt.close()}),Xt.on("blocked",function(t){!t.newVersion||t.newVersion<t.oldVersion?console.warn("Dexie.delete('"+Xt.name+"') was blocked"):console.warn("Upgrade '"+Xt.name+"' blocked by other connection holding version "+t.oldVersion/10)})}(),Dt.forEach(function(t){t(Xt)})}function _t(t){if("function"==typeof t)return new t;if(Mt(t))return[_t(t[0])];if(t&&"object"==typeof t){var e={};return wt(e,t),e}return t}function wt(t,e){return Nt(e).forEach(function(n){var r=_t(e[n]);t[n]=r}),t}function Tt(t){return ot(function(e){var n=e.target,r=n._hookCtx,o=r.value||n.result,i=r&&r.onsuccess;i&&i(o),t&&t(o)},t)}function kt(t){return ot(function(e){return xt(e),t(e.target.error),!1})}function Et(t){return ot(function(e){t(e.target.result)})}function Ot(t){return ot(function(e){var n=e.target,r=n.error,o=n._hookCtx,i=o&&o.onerror;return i&&i(r),xt(e),t(r),!1})}function xt(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}function At(t){function e(t){return function(e){var n=t(e),r=n.value;return n.done?r:r&&"function"==typeof r.then?r.then(o,i):Mt(r)?F.all(r).then(o,i):o(r)}}var n=function(e){return t.next(e)},r=function(e){return t.throw(e)},o=e(n),i=e(r);return e(n)()}function St(t,e,n,r,o,i,u){this.name=t,this.keyPath=e,this.unique=n,this.multi=r,this.auto=o,this.compound=i,this.dotted=u;var a="string"==typeof e?e:e&&"["+[].join.call(e,"+")+"]";this.src=(n?"&":"")+(r?"*":"")+(o?"++":"")+a}function jt(t,e,n,r){this.name=t,this.primKey=e||new St,this.indexes=n||[new St],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=h(n,function(t){return[t.name,t]})}function Pt(t){return 1===t.length?t[0]:t}function Ct(t){var e=t&&(t.getDatabaseNames||t.webkitGetDatabaseNames);return e&&e.bind(t)}var Nt=Object.keys,Mt=Array.isArray,It="undefined"!=typeof self?self:"undefined"!=typeof window?window:t,Rt=Object.getPrototypeOf,Dt={}.hasOwnProperty,Lt=Object.defineProperty,Kt=Object.getOwnPropertyDescriptor,Ut=[].slice,Bt=[].concat,Ft="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(b([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(e){return e+t+"Array"})}))).filter(function(t){return It[t]}).map(function(t){return It[t]}),Gt="undefined"!=typeof Symbol&&Symbol.iterator,Ht=Gt?function(t){var e;return null!=t&&(e=t[Gt])&&e.apply(t)}:function(){return null},qt={},Wt="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href),Vt=function(){return!0},Qt=!new Error("").stack,Yt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Jt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],zt=Yt.concat(Jt),$t={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};u(A).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+O(this._e,2))}},toString:function(){return this.name+": "+this.message}}),u(j).from(A),u(P).from(A);var Xt=zt.reduce(function(t,e){return t[e]=e+"Error",t},{}),Zt=A,te=zt.reduce(function(t,e){function n(t,n){this._e=E(),this.name=r,t?"string"==typeof t?(this.message=t,this.inner=n||null):"object"==typeof t&&(this.message=t.name+" "+t.message,this.inner=t):(this.message=$t[e]||r,this.inner=null)}var r=e+"Error";return u(n).from(Zt),t[e]=n,t},{});te.Syntax=SyntaxError,te.Type=TypeError,te.Range=RangeError;var ee=Jt.reduce(function(t,e){return t[e+"Error"]=te[e],t},{}),ne=zt.reduce(function(t,e){return-1===["Syntax","Type","Range"].indexOf(e)&&(t[e+"Error"]=te[e]),t},{});ne.ModifyError=j,ne.DexieError=A,ne.BulkError=P;var re={},oe=100,ie=7,ue=function(){try{return new Function("let F=async ()=>{},p=F();return [p,Object.getPrototypeOf(p),Promise.resolve(),F.constructor];")()}catch(e){var t=It.Promise;return t?[t.resolve(),t.prototype,t.resolve()]:[]}}(),ae=ue[0],ce=ue[1],se=ue[2],le=ce&&ce.then,fe=ae&&ae.constructor,he=ue[3],pe=!!se,de=!1,ve=se?function(){se.then(z)}:It.setImmediate?setImmediate.bind(null,z):It.MutationObserver?function(){var t=document.createElement("div");new MutationObserver(function(){z(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:function(){setTimeout(z,0)},ye=function(t,e){Oe.push([t,e]),ge&&(ve(),ge=!1)},me=!0,ge=!0,be=[],_e=[],we=null,Te=M,ke={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:mt,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(t){try{mt(t[0],t[1])}catch(t){}})}},Ee=ke,Oe=[],xe=0,Ae=[],Se={get:function(){function t(t,r){var o=this,i=!e.global&&(e!==Ee||n!==Ie);i&&at();var u=new F(function(n,u){V(o,new G(vt(t,e,i),vt(r,e,i),n,u,e))});return Wt&&J(u,this),u}var e=Ee,n=Ie;return t.prototype=re,t},set:function(t){i(this,"then",t&&t.prototype===re?Se:{get:function(){return t},set:Se.set})}};o(F.prototype,{then:Se,_then:function(t,e){V(this,new G(null,null,t,e,Ee))},catch:function(t){if(1===arguments.length)return this.then(null,t);var e=arguments[0],n=arguments[1];return"function"==typeof e?this.then(null,function(t){return t instanceof e?n(t):rt(t)}):this.then(null,function(t){return t&&t.name===e?n(t):rt(t)})},finally:function(t){return this.then(function(e){return t(),e},function(e){return t(),rt(e)})},stack:{get:function(){if(this._stack)return this._stack;try{de=!0;var t=Y(this,[],20),e=t.join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{de=!1}}},timeout:function(t,e){var n=this;return t<1/0?new F(function(r,o){var i=setTimeout(function(){return o(new te.Timeout(e))},t);n.then(r,o).finally(clearTimeout.bind(null,i))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&i(F.prototype,Symbol.toStringTag,"Promise"),ke.env=ht(),o(F,{all:function(){var t=T.apply(null,arguments).map(ct);return new F(function(e,n){0===t.length&&e([]);var r=t.length;t.forEach(function(o,i){return F.resolve(o).then(function(n){t[i]=n,--r||e(t)},n)})})},resolve:function(t){if(t instanceof F)return t;if(t&&"function"==typeof t.then)return new F(function(e,n){t.then(e,n)});var e=new F(re,!0,t);return J(e,we),e},reject:rt,race:function(){var t=T.apply(null,arguments).map(ct);return new F(function(e,n){t.map(function(t){return F.resolve(t).then(e,n)})})},PSD:{get:function(){return Ee},set:function(t){return Ee=t}},newPSD:it,usePSD:pt,scheduler:{get:function(){return ye},set:function(t){ye=t}},rejectionMapper:{get:function(){return Te},set:function(t){Te=t}},follow:function(t,e){return new F(function(n,r){return it(function(e,n){var r=Ee;r.unhandleds=[],r.onunhandled=n,r.finalize=R(function(){var t=this;tt(function(){0===t.unhandleds.length?e():n(t.unhandleds[0])})},r.finalize),t()},e,n,r)})}});var je,Pe={awaits:0,echoes:0,id:0},Ce=0,Ne=[],Me=0,Ie=0,Re=0,De="unhandledrejection",Le=F.reject,Ke="{version}",Ue=String.fromCharCode(65535),Be=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(t){return Ue}}(),Fe=-1/0,Ge="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",He="String expected.",qe=[],We="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Ve=We,Qe=We,Ye=function(t){return!/(dexie\.js|dexie\.min\.js)/.test(t)};k(Wt,Ye),o(bt,ne),o(bt,{delete:function(t){var e=new bt(t),n=e.delete();return n.onblocked=function(t){return e.on("blocked",t),this},n},exists:function(t){return new bt(t).open().then(function(t){return t.close(),!0}).catch(bt.NoSuchDatabaseError,function(){return!1})},getDatabaseNames:function(t){var e=Ct(bt.dependencies.indexedDB);return e?new F(function(t,n){var r=e();r.onsuccess=function(e){t(c(e.target.result,0))},r.onerror=kt(n)}).then(t):je.dbnames.toCollection().primaryKeys(t)},defineClass:function(){function t(t){t&&n(this,t)}return t},applyStructure:wt,ignoreTransaction:function(t){return Ee.trans?pt(Ee.transless,t):t()},vip:function(t){return it(function(){return Ee.letThrough=!0,t()})},async:function(t){return function(){try{var e=At(t.apply(this,arguments));return e&&"function"==typeof e.then?e:F.resolve(e)}catch(t){return Le(t)}}},spawn:function(t,e,n){try{var r=At(t.apply(n,e||[]));return r&&"function"==typeof r.then?r:F.resolve(r)}catch(t){return Le(t)}},currentTransaction:{get:function(){return Ee.trans||null}},waitFor:function(t,e){var n=F.resolve("function"==typeof t?bt.ignoreTransaction(t):t).timeout(e||6e4);return Ee.trans?Ee.trans.waitFor(n):n},Promise:F,debug:{get:function(){return Wt},set:function(t){k(t,"dexie"===t?function(){return!0}:Ye)}},derive:u,extend:n,props:o,override:s,Events:gt,getByKeyPath:v,setByKeyPath:y,delByKeyPath:m,shallowClone:g,deepClone:_,getObjectDiff:w,asap:f,maxKey:Be,minKey:Fe,addons:[],connections:qe,MultiModifyError:te.Modify,errnames:Xt,IndexSpec:St,TableSchema:jt,dependencies:function(){try{return{indexedDB:It.indexedDB||It.mozIndexedDB||It.webkitIndexedDB||It.msIndexedDB,IDBKeyRange:It.IDBKeyRange||It.webkitIDBKeyRange}}catch(t){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:Ke,version:Ke.split(".").map(function(t){return parseInt(t)}).reduce(function(t,e,n){return t+e/Math.pow(10,2*n)}),default:bt,Dexie:bt}),F.rejectionMapper=C,je=new bt("__dbnames"),je.version(1).stores({dbnames:"name"}),function(){try{void 0!==typeof localStorage&&void 0!==It.document&&(JSON.parse(localStorage.getItem("Dexie.DatabaseNames")||"[]").forEach(function(t){return je.dbnames.put({name:t}).catch(N)}),localStorage.removeItem("Dexie.DatabaseNames"))}catch(t){}}(),e.a=bt}).call(e,n("h6ac"))},pQiA:function(t,e,n){t.exports=n.p+"4b5c85c55cec627ba8adc7071fa7378d.png"},pwNi:function(t,e,n){"use strict";var r=n("KM04");"serviceWorker"in navigator&&"https:"===location.protocol&&navigator.serviceWorker.register(n.p+"sw.js");var o=function(t){return t&&t.default?t.default:t};if("function"==typeof o(n("JkW7"))){var i=document.body.firstElementChild,u=function(){var t=o(n("JkW7"));i=(0,r.render)((0,r.h)(t),document.body,i)};u()}},rq4c:function(){},sw5u:function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Link=e.Match=void 0;var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=n("KM04"),c=n("/QC5"),s=e.Match=function(t){function e(){for(var e,n,r,i=arguments.length,u=Array(i),a=0;a<i;a++)u[a]=arguments[a];return e=n=o(this,t.call.apply(t,[this].concat(u))),n.update=function(t){n.nextUrl=t,n.setState({})},r=e,o(n,r)}return i(e,t),e.prototype.componentDidMount=function(){c.subscribers.push(this.update)},e.prototype.componentWillUnmount=function(){c.subscribers.splice(c.subscribers.indexOf(this.update)>>>0,1)},e.prototype.render=function(t){var e=this.nextUrl||(0,c.getCurrentUrl)(),n=e.replace(/\?.+$/,"");return this.nextUrl=null,t.children[0]&&t.children[0]({url:e,path:n,matches:n===t.path})},e}(a.Component),l=function(t){var e=t.activeClassName,n=t.path,o=r(t,["activeClassName","path"]);return(0,a.h)(s,{path:n||o.href},function(t){var n=t.matches;return(0,a.h)(c.Link,u({},o,{class:[o.class||o.className,n&&e].filter(Boolean).join(" ")}))})};e.Link=l,e.default=s,s.Link=l},u3et:function(t){t.exports={header:"header__3QGkI",logo:"logo__35n-0",sign_up:"sign_up__3mkZY"}},xToX:function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=n("KM04");t.exports=function(t,e,n){function a(t){return t.displayName||t.name||"Component"}function c(t,e){for(var n in t)if(!(n in e))return!0;for(var r in e)if(t[r]!==e[r])return!0;return!1}if("function"!=typeof t)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof e)throw new Error("Expected handleStateChangeOnClient to be a function.");if(void 0!==n&&"function"!=typeof n)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(s){function l(){h=t(f.map(function(t){return t.props})),p.canUseDOM?e(h):n&&(h=n(h))}if("function"!=typeof s)throw new Error("Expected WrappedComponent to be a React component.");var f=[],h=void 0,p=function(t){function e(){return o(this,t.apply(this,arguments))}return i(e,t),e.peek=function(){return h},e.rewind=function(){if(e.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var t=h;return h=void 0,f=[],t},e.prototype.shouldComponentUpdate=function(t){var e=t.children,n=r(t,["children"]);return e&&e.length&&(n.children=e),c(n,this.props)},e.prototype.componentWillMount=function(){f.push(this),l()},e.prototype.componentDidUpdate=function(){l()},e.prototype.componentWillUnmount=function(){var t=f.indexOf(this);f.splice(t,1),l()},e.prototype.render=function(){return(0,u.h)(s,this.props)},e}(u.Component);return p.displayName="SideEffect("+a(s)+")",p.canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),p}}}});
//# sourceMappingURL=bundle.955f0.js.map